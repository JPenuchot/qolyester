<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Qolyester daemon: set.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="classes.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>set.hh</h1><a href="a00268.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (C) 2003, 2004, 2005, 2008 Laboratoire de Recherche en Informatique</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">// This file is part of Qolyester.</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="comment">// Qolyester is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment">// modify it under the terms of the GNU General Public License</span>
<a name="l00007"></a>00007 <span class="comment">// as published by the Free Software Foundation; either version 2</span>
<a name="l00008"></a>00008 <span class="comment">// of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="comment">// Qolyester is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment">// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span>
<a name="l00018"></a>00018 
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#ifndef QOLYESTER_UTL_SET_HH</span>
<a name="l00028"></a><a class="code" href="a00268.html#286a20d51e8a0bfb78695e9bc8a001b0">00028</a> <span class="preprocessor"></span><span class="preprocessor"># define QOLYESTER_UTL_SET_HH 1</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00030"></a>00030 <span class="preprocessor"># include &lt;set&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor"># include &lt;map&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor"># include "<a class="code" href="a00225.html">iterator.hh</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor"># include "<a class="code" href="a00234.html" title="Metaprogramming tools.">meta.hh</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor"># include "<a class="code" href="a00191.html">comparator.hh</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor"># include "<a class="code" href="a00271.html">stampable.hh</a>"</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">namespace </span>olsr {
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   <span class="keyword">namespace </span>sch {
<a name="l00040"></a>00040     <span class="keyword">class </span>StatePrinter;
<a name="l00041"></a>00041   }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043   <span class="keyword">namespace </span>utl {
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="keyword">namespace </span>internal {
<a name="l00046"></a>00046 
<a name="l00047"></a>00047       <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00048"></a><a class="code" href="a00011.html">00048</a>       <span class="keyword">struct </span><a class="code" href="a00011.html">builder</a> {
<a name="l00049"></a><a class="code" href="a00011.html#b063df1fd8d4413ca1e882be0d095645">00049</a>         <span class="keyword">static</span> T <a class="code" href="a00011.html#b063df1fd8d4413ca1e882be0d095645">make</a>(<span class="keyword">const</span> T&amp; x) {
<a name="l00050"></a>00050           <span class="keywordflow">return</span> T(x);
<a name="l00051"></a>00051         }
<a name="l00052"></a>00052       };
<a name="l00053"></a>00053 
<a name="l00054"></a>00054       <span class="keyword">template</span> &lt;<span class="keyword">class</span> Iter&gt;
<a name="l00055"></a><a class="code" href="a00012.html">00055</a>       <span class="keyword">struct </span><a class="code" href="a00011.html">builder</a>&lt;<a class="code" href="a00023.html">DeconstIterator</a>&lt;Iter&gt; &gt; {
<a name="l00056"></a><a class="code" href="a00012.html#2f8f1132f63e5aa159b79176bbea5320">00056</a>         <span class="keyword">static</span> <a class="code" href="a00023.html">DeconstIterator&lt;Iter&gt;</a> <a class="code" href="a00011.html#b063df1fd8d4413ca1e882be0d095645">make</a>(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00057"></a>00057           <span class="keywordflow">return</span> <a class="code" href="a00023.html">DeconstIterator&lt;Iter&gt;::build</a>(x);
<a name="l00058"></a>00058         }
<a name="l00059"></a>00059       };
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     } <span class="comment">// namespace internal</span>
<a name="l00062"></a>00062 
<a name="l00071"></a>00071     <span class="keyword">template</span> &lt;<span class="keyword">class </span>Elem, <span class="keyword">class </span>Iset,
<a name="l00072"></a>00072               <span class="keyword">class </span>Iter = <span class="keyword">typename</span> Iset::iterator,
<a name="l00073"></a>00073               <span class="keyword">class </span>CIter = <span class="keyword">typename</span> Iset::const_iterator&gt;
<a name="l00074"></a><a class="code" href="a00152.html">00074</a>     <span class="keyword">class </span><a class="code" href="a00152.html" title="Simple generic set.">Set</a> {
<a name="l00075"></a><a class="code" href="a00152.html#3f50de7de52ff79dfb1363cd2d76c06b">00075</a>       <span class="keyword">typedef</span> <a class="code" href="a00152.html" title="Simple generic set.">Set&lt;Elem, Iset, Iter, CIter&gt;</a>      <a class="code" href="a00152.html" title="Simple generic set.">This</a>;
<a name="l00076"></a><a class="code" href="a00152.html#7af4b591c224bcb1dc23f9ad47620197">00076</a>       <span class="keyword">typedef</span> Iset                              <a class="code" href="a00152.html#7af4b591c224bcb1dc23f9ad47620197">set_t</a>;
<a name="l00077"></a>00077     <span class="keyword">public</span>:
<a name="l00078"></a><a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">00078</a>       <span class="keyword">typedef</span> CIter                     <a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">const_iterator</a>;
<a name="l00079"></a><a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">00079</a>       <span class="keyword">typedef</span> Iter                      <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="a00152.html#770f08541dc14a3f73fce7cbbe01f1af">00081</a>       <a class="code" href="a00152.html#770f08541dc14a3f73fce7cbbe01f1af">Set</a>() : <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>() {}
<a name="l00082"></a>00082 
<a name="l00087"></a><a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">00087</a>       <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a>  <a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>() { <span class="keywordflow">return</span> <a class="code" href="a00011.html">internal::builder&lt;Iter&gt;::make</a>(<a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.begin()); }
<a name="l00088"></a>00088 
<a name="l00093"></a><a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">00093</a>       <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a>  <a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>() { <span class="keywordflow">return</span> <a class="code" href="a00011.html">internal::builder&lt;Iter&gt;::make</a>(<a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.end()); }
<a name="l00094"></a>00094 
<a name="l00100"></a><a class="code" href="a00152.html#f477956791cd929a6224b798f1b7dbff">00100</a>       <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a>  <a class="code" href="a00152.html#f477956791cd929a6224b798f1b7dbff">find</a>(<span class="keyword">const</span> Elem&amp; e) {
<a name="l00101"></a>00101         <span class="keywordflow">return</span> <a class="code" href="a00011.html">internal::builder&lt;Iter&gt;::make</a>(<a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.find(e));
<a name="l00102"></a>00102       }
<a name="l00103"></a>00103 
<a name="l00108"></a><a class="code" href="a00152.html#49f0c99b5b92c6bd71efbefcb8ee1867">00108</a>       <a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">const_iterator</a>    <a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>()<span class="keyword"> const </span>{
<a name="l00109"></a>00109         <span class="keywordflow">return</span> <a class="code" href="a00011.html">internal::builder&lt;CIter&gt;::make</a>(<a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.begin());
<a name="l00110"></a>00110       }
<a name="l00111"></a>00111 
<a name="l00116"></a><a class="code" href="a00152.html#a7a73d02edddc064e6df6014f9804a41">00116</a>       <a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">const_iterator</a>    <a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>()<span class="keyword"> const </span>{
<a name="l00117"></a>00117         <span class="keywordflow">return</span> <a class="code" href="a00011.html">internal::builder&lt;CIter&gt;::make</a>(<a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.end());
<a name="l00118"></a>00118       }
<a name="l00119"></a>00119 
<a name="l00125"></a><a class="code" href="a00152.html#4d670d483d0925d7c09a7e812c18fc28">00125</a>       <a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">const_iterator</a>    <a class="code" href="a00152.html#f477956791cd929a6224b798f1b7dbff">find</a>(<span class="keyword">const</span> Elem&amp; e)<span class="keyword"> const </span>{
<a name="l00126"></a>00126         <span class="keywordflow">return</span> <a class="code" href="a00011.html">internal::builder&lt;CIter&gt;::make</a>(<a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.find(e));
<a name="l00127"></a>00127       }
<a name="l00128"></a>00128 
<a name="l00135"></a><a class="code" href="a00152.html#0158c2a5e19e5450e7023a85427a4dc3">00135</a>       std::pair&lt;iterator, bool&gt; <a class="code" href="a00152.html#0158c2a5e19e5450e7023a85427a4dc3">insert</a>(<span class="keyword">const</span> Elem&amp; e) {
<a name="l00136"></a>00136         std::pair&lt;typename Iset::iterator, bool&gt;        p =
<a name="l00137"></a>00137           <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.insert(e);
<a name="l00138"></a>00138         <span class="keywordflow">return</span> std::pair&lt;iterator, bool&gt;(<a class="code" href="a00011.html">internal::builder&lt;Iter&gt;::make</a>(p.first),
<a name="l00139"></a>00139                                          p.second);
<a name="l00140"></a>00140       }
<a name="l00141"></a>00141 
<a name="l00145"></a>00145       <span class="keyword">template</span> &lt;<span class="keyword">class</span> InputIterator&gt;
<a name="l00146"></a><a class="code" href="a00152.html#5d26144771d898ee5f55e1cbb21c5d41">00146</a>       <span class="keywordtype">void</span>                      <a class="code" href="a00152.html#0158c2a5e19e5450e7023a85427a4dc3">insert</a>(InputIterator f, InputIterator l) {
<a name="l00147"></a>00147         <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.insert(f, l);
<a name="l00148"></a>00148       }
<a name="l00153"></a><a class="code" href="a00152.html#67d0efc8647585ffe6f27c132c11e3f2">00153</a>       <span class="keywordtype">void</span>                      <a class="code" href="a00152.html#67d0efc8647585ffe6f27c132c11e3f2">erase</a>(<a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a> pos) { <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.erase(pos); }
<a name="l00154"></a>00154 
<a name="l00159"></a><a class="code" href="a00152.html#4cbbbe21b7d862635bfe77d5bf8000cc">00159</a>       <span class="keywordtype">void</span>                      <a class="code" href="a00152.html#67d0efc8647585ffe6f27c132c11e3f2">erase</a>(<span class="keyword">const</span> Elem&amp; e) { <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.erase(e); }
<a name="l00160"></a>00160 
<a name="l00165"></a><a class="code" href="a00152.html#9071f057aef875acb98f84be664c800a">00165</a>       <span class="keywordtype">bool</span>      <a class="code" href="a00152.html#9071f057aef875acb98f84be664c800a">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.empty(); }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167       <span class="keyword">typename</span> set_t::size_type
<a name="l00168"></a><a class="code" href="a00152.html#830cc4c551cfd7464e19d19e11616b6b">00168</a>       <a class="code" href="a00152.html#830cc4c551cfd7464e19d19e11616b6b">size</a>()<span class="keyword"> const</span>
<a name="l00169"></a>00169 <span class="keyword">      </span>{
<a name="l00170"></a>00170         <span class="keywordflow">return</span> <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>.size();
<a name="l00171"></a>00171       }
<a name="l00172"></a>00172 
<a name="l00176"></a><a class="code" href="a00152.html#1a7c9def0fad50e09c6b846c8af19ca3">00176</a>       <span class="keywordtype">bool</span>      <a class="code" href="a00152.html#1a7c9def0fad50e09c6b846c8af19ca3">operator[]</a>(<span class="keyword">const</span> Elem&amp; e)<span class="keyword"> const </span>{
<a name="l00177"></a>00177         <span class="keywordflow">return</span> <a class="code" href="a00152.html#f477956791cd929a6224b798f1b7dbff">find</a>(e) != <a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>();
<a name="l00178"></a>00178       }
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="a00152.html#783e039d018311ede4c2ab0aa7bcae84">00180</a>       <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp;     <a class="code" href="a00152.html#783e039d018311ede4c2ab0aa7bcae84">operator|=</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp; rhs) {
<a name="l00181"></a>00181         <span class="keywordflow">for</span> (<a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">const_iterator</a> i = rhs.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(); i != rhs.<a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(); ++i)
<a name="l00182"></a>00182           <a class="code" href="a00152.html#0158c2a5e19e5450e7023a85427a4dc3">insert</a>(*i);
<a name="l00183"></a>00183         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00184"></a>00184       }
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="a00152.html#c6711ef2a6c91705bb7ef75851f6dadc">00186</a>       <a class="code" href="a00152.html" title="Simple generic set.">This</a>      <a class="code" href="a00152.html#c6711ef2a6c91705bb7ef75851f6dadc">operator|</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp; rhs)<span class="keyword"> const </span>{
<a name="l00187"></a>00187         <span class="keywordflow">return</span> <a class="code" href="a00152.html#3f50de7de52ff79dfb1363cd2d76c06b">This</a>(*<span class="keyword">this</span>) |= rhs;
<a name="l00188"></a>00188       }
<a name="l00189"></a>00189 
<a name="l00190"></a><a class="code" href="a00152.html#3cd9585107a7bcb73696554ae2435d8f">00190</a>       <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp;     <a class="code" href="a00152.html#3cd9585107a7bcb73696554ae2435d8f">operator-=</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp; rhs) {
<a name="l00191"></a>00191         <span class="keywordflow">for</span> (<a class="code" href="a00152.html#338e99245aceb8fdb0ff9a6a4602633a">const_iterator</a> i = rhs.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(); i != rhs.<a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(); ++i)
<a name="l00192"></a>00192           <a class="code" href="a00152.html#67d0efc8647585ffe6f27c132c11e3f2">erase</a>(*i);
<a name="l00193"></a>00193         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="a00152.html#fd4d8bcc11d7b5e8cd700f96a5749681">00196</a>       <a class="code" href="a00152.html" title="Simple generic set.">This</a>      <a class="code" href="a00152.html#fd4d8bcc11d7b5e8cd700f96a5749681">operator-</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp; rhs)<span class="keyword"> const </span>{
<a name="l00197"></a>00197         <span class="keywordflow">return</span> <a class="code" href="a00152.html#3f50de7de52ff79dfb1363cd2d76c06b">This</a>(*<span class="keyword">this</span>) -= rhs;
<a name="l00198"></a>00198       }
<a name="l00199"></a>00199 
<a name="l00200"></a><a class="code" href="a00152.html#e27fc7f86a7ed97f56f96c42d3fb097f">00200</a>       <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp;     <a class="code" href="a00152.html#e27fc7f86a7ed97f56f96c42d3fb097f">operator&amp;=</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp; rhs) {
<a name="l00201"></a>00201         <span class="keywordflow">for</span> (<a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a> i = <a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(); i != <a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(); <span class="comment">/* ++i elsewhere */</span>)
<a name="l00202"></a>00202           <span class="keywordflow">if</span> (!rhs[*i]) {
<a name="l00203"></a>00203             <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">iterator</a> tmp = i++;
<a name="l00204"></a>00204             <a class="code" href="a00152.html#67d0efc8647585ffe6f27c132c11e3f2">erase</a>(tmp);
<a name="l00205"></a>00205           } <span class="keywordflow">else</span>
<a name="l00206"></a>00206             ++i;
<a name="l00207"></a>00207         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00208"></a>00208       }
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="a00152.html#6595a033046e1cb725d62a8fe0602911">00210</a>       <a class="code" href="a00152.html" title="Simple generic set.">This</a>      <a class="code" href="a00152.html#6595a033046e1cb725d62a8fe0602911">operator&amp;</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">This</a>&amp; rhs)<span class="keyword"> const </span>{
<a name="l00211"></a>00211         <span class="keywordflow">return</span> <a class="code" href="a00152.html#3f50de7de52ff79dfb1363cd2d76c06b">This</a>(*<span class="keyword">this</span>) &amp;= rhs;
<a name="l00212"></a>00212       }
<a name="l00213"></a>00213     <span class="keyword">private</span>:
<a name="l00214"></a><a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">00214</a>       <a class="code" href="a00152.html#7af4b591c224bcb1dc23f9ad47620197">set_t</a>     <a class="code" href="a00152.html#0406abac16bcd0ba3a3265aaf74b3b86">set_</a>;
<a name="l00215"></a>00215 
<a name="l00216"></a><a class="code" href="a00152.html#c3bfe10973c89760a501609f3767a172">00216</a>       <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="a00158.html">sch::StatePrinter</a>;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     };
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="keyword">template</span> &lt;<span class="keyword">class</span> Set&gt;
<a name="l00221"></a>00221     <span class="keyword">struct </span>index_traits;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">class</span>, <span class="keyword">class</span>, <span class="keyword">class</span>&gt; <span class="keyword">class </span>S,
<a name="l00224"></a>00224               <span class="keyword">class </span>K, <span class="keyword">class </span>C, <span class="keyword">class </span>A&gt;
<a name="l00225"></a><a class="code" href="a00051.html">00225</a>     <span class="keyword">struct </span>index_traits&lt; S&lt;K, C, A&gt; &gt; {
<a name="l00226"></a><a class="code" href="a00051.html#ea1e6a8dc76d9f04b901eeb1d8617d0e">00226</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> S&lt;K, C, A&gt;::iterator             iter;
<a name="l00227"></a><a class="code" href="a00051.html#00648db1163e6935c15b3f2328a26568">00227</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> S&lt;K, C, A&gt;::value_type           value;
<a name="l00228"></a><a class="code" href="a00051.html#2bcd9172b1915f482f6510d262d68d31">00228</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00176.html">type_traits&lt;value&gt;::const_val</a>    const_elem;
<a name="l00229"></a><a class="code" href="a00051.html#6d20e0b7df8703cb72c91d194ed089c1">00229</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00176.html">type_traits&lt;value&gt;::const_ref</a>    const_ref;
<a name="l00230"></a><a class="code" href="a00051.html#7f20f1c17eb761c6cb600a62316ed096">00230</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00176.html">type_traits&lt;value&gt;::const_ptr</a>    const_ptr;
<a name="l00231"></a><a class="code" href="a00051.html#56e8afd956281a7df3b79ac3d2e34e4b">00231</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> S&lt;K, C, A&gt;::key_compare          key_comp;
<a name="l00232"></a>00232     };
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">class</span>, <span class="keyword">class</span>, <span class="keyword">class</span>&gt; <span class="keyword">class </span>Cont,
<a name="l00235"></a>00235               <span class="keyword">class </span><a class="code" href="a00152.html" title="Simple generic set.">Set</a>,
<a name="l00236"></a>00236               <span class="keyword">class </span>Comp = <a class="code" href="a00047.html">iless&lt;typename Set::iterator&gt;</a> &gt;
<a name="l00237"></a>00237     <span class="keyword">class </span>Index;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="keyword">template</span> &lt;<span class="keyword">class</span> Set, <span class="keyword">class</span> Comp&gt;
<a name="l00240"></a><a class="code" href="a00050.html">00240</a>     <span class="keyword">class </span>Index&lt;std::set, <a class="code" href="a00152.html" title="Simple generic set.">Set</a>, Comp&gt; {
<a name="l00241"></a><a class="code" href="a00050.html#d538cb198776fa64fb3ddfdec80fd2d9">00241</a>       <span class="keyword">typedef</span> Index&lt;std::set, Set, Comp&gt;                <a class="code" href="a00050.html">This</a>;
<a name="l00242"></a><a class="code" href="a00050.html#1e476ac79ec95f933869fc13603be65a">00242</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::iter          Iter;
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="a00050.html#5128be17493e84de05b7f30ddbe7a191">00244</a>       <span class="keyword">typedef</span> std::set&lt;Iter, Comp&gt;                      set_t;
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="a00050.html#8da1a1ecc658850f0a3e8b0e99d022e0">00246</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> set_t::const_iterator            c_iterator_;
<a name="l00247"></a><a class="code" href="a00050.html#359001dd5c9c6c978496f31eb828666c">00247</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::value         Value;
<a name="l00248"></a><a class="code" href="a00050.html#50eb5cba3e098989ffe6f11edf778baf">00248</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_elem    Elem;
<a name="l00249"></a>00249     <span class="keyword">public</span>:
<a name="l00250"></a><a class="code" href="a00050.html#b0c3531b4ecfcb6eeead064fe981e1b6">00250</a>       <span class="keyword">typedef</span> Elem                                      value_type;
<a name="l00251"></a><a class="code" href="a00050.html#faa841c6ad8fdc4833a25df00a221104">00251</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ref     const_reference;
<a name="l00252"></a><a class="code" href="a00050.html#2658d93cd6110d20e902543f878f073c">00252</a>       <span class="keyword">typedef</span> const_reference                           reference;
<a name="l00253"></a><a class="code" href="a00050.html#41b5d1516e308791ceeed2cfaecaedfe">00253</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ptr     const_pointer;
<a name="l00254"></a><a class="code" href="a00050.html#8949d2c870f2897554f60e5e73306057">00254</a>       <span class="keyword">typedef</span> const_pointer                             pointer;
<a name="l00255"></a><a class="code" href="a00050.html#44e712fa7717e4ce7759b13f37b5a04c">00255</a>       <span class="keyword">typedef</span> <a class="code" href="a00026.html">DerefIterator&lt;c_iterator_&gt;</a>                <a class="code" href="a00026.html">const_iterator</a>;
<a name="l00256"></a><a class="code" href="a00050.html#f9c64b2bdb8cabad4b6f583d65d624f3">00256</a>       <span class="keyword">typedef</span> <a class="code" href="a00026.html">const_iterator</a>                            <a class="code" href="a00026.html">iterator</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="a00050.html#a05fcd31c2bc5f5cf04d7d45dfc94aa8">00258</a>       <a class="code" href="a00026.html">const_iterator</a>    begin()<span class="keyword"> const </span>{
<a name="l00259"></a>00259         <span class="keywordflow">return</span> const_iterator::build(c_.begin());
<a name="l00260"></a>00260       }
<a name="l00261"></a><a class="code" href="a00050.html#c3779feb59b90e9dd51add6532667447">00261</a>       <a class="code" href="a00026.html">const_iterator</a>    end()<span class="keyword"> const </span>{
<a name="l00262"></a>00262         <span class="keywordflow">return</span> const_iterator::build(c_.end());
<a name="l00263"></a>00263       }
<a name="l00264"></a><a class="code" href="a00050.html#1fe3e0e43e4f48b2cf5f464d68abc21a">00264</a>       <a class="code" href="a00026.html">const_iterator</a>    find(<span class="keyword">const</span> Elem&amp; x)<span class="keyword"> const </span>{
<a name="l00265"></a>00265         <a class="code" href="a00152.html" title="Simple generic set.">Set</a>     tmp;
<a name="l00266"></a>00266         tmp.<a class="code" href="a00152.html#0158c2a5e19e5450e7023a85427a4dc3">insert</a>(x);
<a name="l00267"></a>00267         <span class="keywordflow">return</span> const_iterator::build(c_.find(tmp.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>()));
<a name="l00268"></a>00268       }
<a name="l00269"></a>00269 
<a name="l00270"></a><a class="code" href="a00050.html#f7f41323ab8e6a3643cd1c7a3d90a78d">00270</a>       <span class="keyword">typename</span> set_t::size_type size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> c_.size(); }
<a name="l00271"></a>00271 
<a name="l00272"></a><a class="code" href="a00050.html#39004e7e04aaa92366f194c4f1feab00">00272</a>       std::pair&lt;const_iterator, bool&gt;   insert(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00273"></a>00273         std::pair&lt;typename set_t::iterator, bool&gt;       p = c_.insert(x);
<a name="l00274"></a>00274         <span class="keywordflow">return</span> std::pair&lt;const_iterator, bool&gt;(const_iterator::build(p.first),
<a name="l00275"></a>00275                                                p.second);
<a name="l00276"></a>00276       }
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="a00050.html#1f5363eff1274e2dd145cb500f9b3a58">00278</a>       <span class="keywordtype">void</span>              erase(<a class="code" href="a00026.html">const_iterator</a> pos) {
<a name="l00279"></a>00279         c_.erase(pos);
<a name="l00280"></a>00280       }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="a00050.html#a36815ac2c9af2bf6be04405d25d0a5b">00282</a>       <span class="keywordtype">void</span>              erase(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00283"></a>00283         c_.erase(x);
<a name="l00284"></a>00284       }
<a name="l00285"></a>00285     <span class="keyword">private</span>:
<a name="l00286"></a><a class="code" href="a00050.html#bebf55a49c436d814e0c71093edd1806">00286</a>       set_t     c_;
<a name="l00287"></a>00287     };
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     <span class="keyword">template</span> &lt;<span class="keyword">class</span> Set, <span class="keyword">class</span> Comp&gt;
<a name="l00290"></a><a class="code" href="a00049.html">00290</a>     <span class="keyword">class </span>Index&lt;std::multiset, <a class="code" href="a00152.html" title="Simple generic set.">Set</a>, Comp&gt; {
<a name="l00291"></a><a class="code" href="a00049.html#5c3eb3df77510bcff993c4a895d9c757">00291</a>       <span class="keyword">typedef</span> Index&lt;std::multiset, Set, Comp&gt;           <a class="code" href="a00049.html">This</a>;
<a name="l00292"></a><a class="code" href="a00049.html#a94bb05d7b5ed37f8fe5fa18a4f2b058">00292</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::iter          Iter;
<a name="l00293"></a>00293 
<a name="l00294"></a><a class="code" href="a00049.html#6113a9c39015e417da6393443930d7de">00294</a>       <span class="keyword">typedef</span> std::multiset&lt;Iter, Comp&gt;                 set_t;
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="a00049.html#6a1c3c2f72a144dbfba86411fbed1b3a">00296</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> set_t::const_iterator            c_iterator_;
<a name="l00297"></a><a class="code" href="a00049.html#dc0ab33aedfc92fdc709e988fb8b768f">00297</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::value         Value;
<a name="l00298"></a><a class="code" href="a00049.html#a651fb1d0b14f588b1354a6ec9659f71">00298</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_elem    Elem;
<a name="l00299"></a><a class="code" href="a00049.html#cbec10e1826bb692d46fede5fa687a66">00299</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::key_compare                 comp_t;
<a name="l00300"></a>00300     <span class="keyword">public</span>:
<a name="l00301"></a><a class="code" href="a00049.html#9ff0ab2f14834c0b6b8851dc80212ce2">00301</a>       <span class="keyword">typedef</span> Elem                                      value_type;
<a name="l00302"></a><a class="code" href="a00049.html#58ccb2b23d54192db9999f22d10e9ce5">00302</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ref     const_reference;
<a name="l00303"></a><a class="code" href="a00049.html#ea2353eee70939e78abb11799fe6dcca">00303</a>       <span class="keyword">typedef</span> const_reference                           reference;
<a name="l00304"></a><a class="code" href="a00049.html#edcbc804f5d0417d9bdc6fad9e635ff1">00304</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ptr     const_pointer;
<a name="l00305"></a><a class="code" href="a00049.html#bd0b71213663b63b57cd76f0dbe62d8e">00305</a>       <span class="keyword">typedef</span> const_pointer                             pointer;
<a name="l00306"></a><a class="code" href="a00049.html#7767fd09a2d18e0f69492a7441f4b58f">00306</a>       <span class="keyword">typedef</span> <a class="code" href="a00026.html">DerefIterator&lt;c_iterator_&gt;</a>                <a class="code" href="a00026.html">const_iterator</a>;
<a name="l00307"></a><a class="code" href="a00049.html#48dd9dd961d7e60e25e60ce49843f09c">00307</a>       <span class="keyword">typedef</span> <a class="code" href="a00026.html">const_iterator</a>                            <a class="code" href="a00026.html">iterator</a>;
<a name="l00308"></a>00308 
<a name="l00309"></a><a class="code" href="a00049.html#e971240f209e7e9e897508593a88d660">00309</a>       Index(<span class="keyword">const</span> <span class="keyword">typename</span> Set::key_compare&amp; kc = comp_t())
<a name="l00310"></a>00310         : kc_(kc) {}
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="a00049.html#48f6b131977ac990291d507c5869d1b3">00312</a>       <a class="code" href="a00026.html">const_iterator</a>    begin()<span class="keyword"> const </span>{
<a name="l00313"></a>00313         <span class="keywordflow">return</span> const_iterator::build(c_.begin());
<a name="l00314"></a>00314       }
<a name="l00315"></a><a class="code" href="a00049.html#17dfeed3620fc335310df0b2be91e4db">00315</a>       <a class="code" href="a00026.html">const_iterator</a>    end()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> const_iterator::build(c_.end()); }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317       std::pair&lt;const_iterator, const_iterator&gt;
<a name="l00318"></a><a class="code" href="a00049.html#7610d54e08a9ffba164a3ebdce0f4ffb">00318</a>       equal_range(<span class="keyword">const</span> Elem&amp; x)<span class="keyword"> const </span>{
<a name="l00319"></a>00319         <a class="code" href="a00152.html" title="Simple generic set.">Set</a>     tmp;
<a name="l00320"></a>00320         tmp.<a class="code" href="a00152.html#0158c2a5e19e5450e7023a85427a4dc3">insert</a>(x);
<a name="l00321"></a>00321         std::pair&lt;c_iterator_, c_iterator_&gt;     er =
<a name="l00322"></a>00322           c_.equal_range(tmp.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>());
<a name="l00323"></a>00323         <span class="keywordflow">return</span> std::pair&lt;<a class="code" href="a00026.html">const_iterator</a>,
<a name="l00324"></a>00324                          const_iterator&gt;(const_iterator::build(er.first),
<a name="l00325"></a>00325                                          const_iterator::build(er.second));
<a name="l00326"></a>00326       }
<a name="l00327"></a>00327 
<a name="l00328"></a><a class="code" href="a00049.html#b0806d735587e35ba340ec8592cb10d1">00328</a>       <span class="keyword">typename</span> set_t::size_type size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> c_.size(); }
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="a00049.html#56685dbf2345cd2420b0c6ff65743e68">00330</a>       <a class="code" href="a00026.html">const_iterator</a>    insert(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00331"></a>00331         <span class="keywordflow">return</span> const_iterator::build(c_.insert(x));
<a name="l00332"></a>00332       }
<a name="l00333"></a>00333 
<a name="l00334"></a><a class="code" href="a00049.html#9828a16620b23532e26358221f01a2e2">00334</a>       <span class="keywordtype">void</span>              erase(<a class="code" href="a00026.html">const_iterator</a> pos) {
<a name="l00335"></a>00335         c_.erase(pos);
<a name="l00336"></a>00336       }
<a name="l00337"></a>00337 
<a name="l00338"></a><a class="code" href="a00049.html#2c688eafc5ee7b4965a147a919bde216">00338</a>       <span class="keywordtype">void</span>              erase(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00339"></a>00339         std::pair&lt;<span class="keyword">typename</span> set_t::iterator,
<a name="l00340"></a>00340                   <span class="keyword">typename</span> set_t::iterator&gt;     set_er = c_.equal_range(x);
<a name="l00341"></a>00341         std::pair&lt;iterator, iterator&gt;   er =
<a name="l00342"></a>00342           std::pair&lt;iterator, iterator&gt;(iterator::build(set_er.first),
<a name="l00343"></a>00343                                         iterator::build(set_er.second));
<a name="l00344"></a>00344         <span class="keywordflow">for</span> (<a class="code" href="a00026.html">iterator</a> i = er.first; i != er.second; <span class="comment">/* ++i elsewhere */</span>)
<a name="l00345"></a>00345           <span class="keywordflow">if</span> (!kc_(*i, *x) &amp;&amp; !kc_(*x, *i)) {
<a name="l00346"></a>00346             <a class="code" href="a00026.html">iterator</a>    tmp = i++;
<a name="l00347"></a>00347             erase(tmp);
<a name="l00348"></a>00348           } <span class="keywordflow">else</span>
<a name="l00349"></a>00349             ++i;
<a name="l00350"></a>00350       }
<a name="l00351"></a>00351     <span class="keyword">private</span>:
<a name="l00352"></a><a class="code" href="a00049.html#fd8b2bf9e74d206b752bef69982048b5">00352</a>       <span class="keyword">const</span> <span class="keyword">typename</span> Set::key_compare   kc_;
<a name="l00353"></a><a class="code" href="a00049.html#49173848c993d5d978444a944536e576">00353</a>       set_t             c_;
<a name="l00354"></a>00354     };
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00152.html" title="Simple generic set.">Set</a>,
<a name="l00357"></a>00357               <span class="keywordtype">unsigned</span> Dim,
<a name="l00358"></a>00358               <span class="keyword">class </span>Key,
<a name="l00359"></a>00359               <span class="keyword">class </span>Comp = <a class="code" href="a00048.html">imultistampable_less&lt;Key, typename Set::iterator&gt;</a> &gt;
<a name="l00360"></a><a class="code" href="a00087.html">00360</a>     <span class="keyword">class </span><a class="code" href="a00087.html">MSIndex</a> {
<a name="l00361"></a><a class="code" href="a00087.html#bee3e6602c5ddee0c0de1ba484e6d4e1">00361</a>       <span class="keyword">typedef</span> <a class="code" href="a00087.html">MSIndex&lt;Set, Dim, Key, Comp&gt;</a>              <a class="code" href="a00087.html">This</a>;
<a name="l00362"></a><a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">00362</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">Set::iterator</a>                    <a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">Iter</a>;
<a name="l00363"></a><a class="code" href="a00087.html#9a789f7d60aaefb880db74276ac553ce">00363</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::key_compare                 <a class="code" href="a00087.html#9a789f7d60aaefb880db74276ac553ce">IterComp</a>;
<a name="l00364"></a><a class="code" href="a00087.html#e022814561eff225b1f3fb89e7b7174d">00364</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type                  <a class="code" href="a00087.html#e022814561eff225b1f3fb89e7b7174d">Value</a>;
<a name="l00365"></a><a class="code" href="a00087.html#970c7b968cbd9264633236dfe504c12c">00365</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00176.html">type_traits&lt;Value&gt;::const_val</a>    <a class="code" href="a00087.html#970c7b968cbd9264633236dfe504c12c">CElem</a>;
<a name="l00366"></a><a class="code" href="a00087.html#d2e77a67958dd3607f50e4dec34adb5f">00366</a>       <span class="keyword">typedef</span> std::multiset&lt;Iter, Comp&gt;                 <a class="code" href="a00087.html#d2e77a67958dd3607f50e4dec34adb5f">set_t</a>;
<a name="l00367"></a><a class="code" href="a00087.html#46c12b9858cdc4b0236c30ae3416aa40">00367</a>       <span class="keyword">typedef</span> std::map&lt;Key, set_t&gt;                      <a class="code" href="a00087.html#46c12b9858cdc4b0236c30ae3416aa40">setmap_t</a>;
<a name="l00368"></a><a class="code" href="a00087.html#e73a9b3da2936e3198ba6cf61277b82f">00368</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> set_t::const_iterator            <a class="code" href="a00087.html#e73a9b3da2936e3198ba6cf61277b82f">c_iterator_</a>;
<a name="l00369"></a><a class="code" href="a00087.html#ed676445a3fdeec2a24dc72ce5a1d4a5">00369</a>       <span class="keyword">typedef</span> <a class="code" href="a00026.html">DerefIterator&lt;c_iterator_&gt;</a>                <a class="code" href="a00026.html">d_iterator_</a>;
<a name="l00370"></a>00370     <span class="keyword">public</span>:
<a name="l00371"></a><a class="code" href="a00087.html#fe8f7ae64c48d29d0849e82425fa11ec">00371</a>       <span class="keyword">typedef</span> Key                                       <a class="code" href="a00059.html" title="IPv6 address class.">key_type</a>;
<a name="l00372"></a><a class="code" href="a00087.html#ea1a7538551274598f735412418929aa">00372</a>       <span class="keyword">typedef</span> <a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">Iter</a>                                      <a class="code" href="a00087.html#ea1a7538551274598f735412418929aa">value_type</a>;
<a name="l00373"></a><a class="code" href="a00087.html#95ac6b4e0be251e290186f59c25e7465">00373</a>       <span class="keyword">typedef</span> <a class="code" href="a00067.html">KeyedIterator&lt;Key, d_iterator_&gt;</a>           <a class="code" href="a00067.html">const_iterator</a>;
<a name="l00374"></a><a class="code" href="a00087.html#89c637099b13e9150be48352966c8ee6">00374</a>       <span class="keyword">typedef</span> <a class="code" href="a00067.html">const_iterator</a>                            <a class="code" href="a00067.html">iterator</a>;
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="a00087.html#77ad7ec712650074be0e937d1b6a75e6">00376</a>       <a class="code" href="a00087.html#77ad7ec712650074be0e937d1b6a75e6">MSIndex</a>(<span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00377"></a>00377         : <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>(),
<a name="l00378"></a>00378           <a class="code" href="a00087.html#4806d90a1c66b0feffe33033b189e578">c_</a>(s.key_comp()),
<a name="l00379"></a>00379           <a class="code" href="a00087.html#5c605a7bbd7fd853a2507537f84845bb">s_</a>(s)
<a name="l00380"></a>00380       {}
<a name="l00381"></a>00381 
<a name="l00382"></a><a class="code" href="a00087.html#561e8051869c3db670df624ff37f9ef9">00382</a>       <a class="code" href="a00067.html">iterator</a>  <a class="code" href="a00087.html#561e8051869c3db670df624ff37f9ef9">begin</a>(<span class="keyword">const</span> Key&amp; k)<span class="keyword"> const </span>{
<a name="l00383"></a>00383         <span class="keyword">typename</span> setmap_t::const_iterator       x = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.find(k);
<a name="l00384"></a>00384         assert(x != <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end());
<a name="l00385"></a>00385         <span class="keywordflow">return</span> <a class="code" href="a00087.html#89c637099b13e9150be48352966c8ee6">iterator</a>(<a class="code" href="a00026.html#a2b92182e06257e1be61c9f898156fcb">d_iterator_::build</a>(x-&gt;second.begin()), k);
<a name="l00386"></a>00386       }
<a name="l00387"></a>00387 
<a name="l00388"></a><a class="code" href="a00087.html#6e0a5081f7a3f4d1fc97d86bed6e84e2">00388</a>       <a class="code" href="a00067.html">iterator</a>  <a class="code" href="a00087.html#6e0a5081f7a3f4d1fc97d86bed6e84e2">end</a>(<span class="keyword">const</span> Key&amp; k)<span class="keyword"> const </span>{
<a name="l00389"></a>00389         <span class="keyword">typename</span> setmap_t::const_iterator       x = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.find(k);
<a name="l00390"></a>00390         assert(x != <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end());
<a name="l00391"></a>00391         <span class="keywordflow">return</span> <a class="code" href="a00087.html#89c637099b13e9150be48352966c8ee6">iterator</a>(<a class="code" href="a00026.html#a2b92182e06257e1be61c9f898156fcb">d_iterator_::build</a>(x-&gt;second.end()), k);
<a name="l00392"></a>00392       }
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="a00087.html#fc2e38ca6a04b52369c3f6d28a4167f4">00394</a>       <a class="code" href="a00067.html">iterator</a>  <a class="code" href="a00087.html#fc2e38ca6a04b52369c3f6d28a4167f4">find</a>(<span class="keyword">const</span> Key&amp; k, <span class="keyword">const</span> <a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">Iter</a>&amp; x)<span class="keyword"> const </span>{
<a name="l00395"></a>00395         <span class="keyword">typename</span> setmap_t::const_iterator       pos = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.find(k);
<a name="l00396"></a>00396         assert(pos != <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end());
<a name="l00397"></a>00397         <span class="keywordflow">return</span> <a class="code" href="a00087.html#89c637099b13e9150be48352966c8ee6">iterator</a>(<a class="code" href="a00026.html#a2b92182e06257e1be61c9f898156fcb">d_iterator_::build</a>(pos-&gt;second.find(x)), k);
<a name="l00398"></a>00398       }
<a name="l00399"></a>00399 
<a name="l00400"></a><a class="code" href="a00087.html#a3eb7eb3358e5fb814e37808d40d4fb8">00400</a>       <span class="keywordtype">void</span>      <a class="code" href="a00087.html#a3eb7eb3358e5fb814e37808d40d4fb8">insert</a>(<span class="keyword">const</span> <a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">Iter</a>&amp; x) {
<a name="l00401"></a>00401         <span class="keywordflow">for</span> (<span class="keyword">typename</span> setmap_t::iterator i = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.begin(); i != <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end(); ++i)
<a name="l00402"></a>00402           i-&gt;second.insert(x);
<a name="l00403"></a>00403       }
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="a00087.html#7704dd06ac05caec1eb7cbd04daf311e">00405</a>       <span class="keywordtype">void</span>      <a class="code" href="a00087.html#7704dd06ac05caec1eb7cbd04daf311e">erase</a>(<span class="keyword">const</span> <a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">Iter</a>&amp; x) {
<a name="l00406"></a>00406         <span class="keywordflow">for</span> (<span class="keyword">typename</span> setmap_t::iterator i = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.begin(); i != <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end(); ++i) {
<a name="l00407"></a>00407           std::pair&lt;typename set_t::iterator, typename set_t::iterator&gt; p =
<a name="l00408"></a>00408             i-&gt;second.equal_range(x);
<a name="l00409"></a>00409           <span class="keywordflow">for</span> (<span class="keyword">typename</span> set_t::iterator j = p.first;
<a name="l00410"></a>00410                j != p.second; <span class="comment">/* ++j elsewhere */</span>)
<a name="l00411"></a>00411             <span class="keywordflow">if</span> (!<a class="code" href="a00087.html#4806d90a1c66b0feffe33033b189e578">c_</a>(*x, **j) &amp;&amp; !<a class="code" href="a00087.html#4806d90a1c66b0feffe33033b189e578">c_</a>(**j, *x)) {
<a name="l00412"></a>00412               <span class="keyword">typename</span> set_t::iterator  tmp = j++;
<a name="l00413"></a>00413               i-&gt;second.erase(tmp);
<a name="l00414"></a>00414             } <span class="keywordflow">else</span>
<a name="l00415"></a>00415               ++j;
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417       }
<a name="l00418"></a>00418 
<a name="l00419"></a><a class="code" href="a00087.html#f2663068a2a697e85a5b15d3b82bbcdb">00419</a>       <span class="keywordtype">void</span>      <a class="code" href="a00087.html#f2663068a2a697e85a5b15d3b82bbcdb">set_stamp</a>(<a class="code" href="a00067.html">const_iterator</a> pos,
<a name="l00420"></a>00420                           <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>&amp; now = <a class="code" href="a00170.html#3cec049068a76d398d51c7a7e871f456">TimeVal::now</a>()) {
<a name="l00421"></a>00421         <span class="keyword">typename</span> setmap_t::iterator     x = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.find(pos.<a class="code" href="a00067.html#d4201914499384e84deda988525350fa">key</a>());
<a name="l00422"></a>00422         <span class="comment">// This check is important to avoid looping of MaskIterator.</span>
<a name="l00423"></a>00423         <span class="keywordflow">if</span> (<a class="code" href="a00087.html#b4c7918253de79eaa137a9bd825d5bf1">stamp</a>(pos) == now)
<a name="l00424"></a>00424           <span class="keywordflow">return</span>;
<a name="l00425"></a>00425         <a class="code" href="a00087.html#bcb36cd94038c4e8b91563a4e4a74692">Iter</a>    tmp = *<span class="keyword">static_cast&lt;</span><a class="code" href="a00087.html#e73a9b3da2936e3198ba6cf61277b82f">c_iterator_</a>&amp;<span class="keyword">&gt;</span>(pos);
<a name="l00426"></a>00426         x-&gt;second.erase(pos);
<a name="l00427"></a>00427         <span class="keyword">const_cast&lt;</span><a class="code" href="a00087.html#e022814561eff225b1f3fb89e7b7174d">Value</a>&amp;<span class="keyword">&gt;</span>(*tmp).set_stamp(Dim, pos.<a class="code" href="a00067.html#d4201914499384e84deda988525350fa">key</a>(), now);
<a name="l00428"></a>00428         x-&gt;second.insert(tmp);
<a name="l00429"></a>00429       }
<a name="l00430"></a>00430 
<a name="l00431"></a><a class="code" href="a00087.html#b4c7918253de79eaa137a9bd825d5bf1">00431</a>       <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>     <a class="code" href="a00087.html#b4c7918253de79eaa137a9bd825d5bf1">stamp</a>(<a class="code" href="a00067.html">const_iterator</a> pos)<span class="keyword"> const </span>{
<a name="l00432"></a>00432         <span class="keywordflow">return</span> (*static_cast&lt;c_iterator_&amp;&gt;(pos))-&gt;stamp(Dim, pos.<a class="code" href="a00067.html#d4201914499384e84deda988525350fa">key</a>());
<a name="l00433"></a>00433       }
<a name="l00434"></a>00434 
<a name="l00435"></a><a class="code" href="a00087.html#72a07fc621bba7e0f643d21a10efc367">00435</a>       <span class="keywordtype">bool</span>      <a class="code" href="a00087.html#72a07fc621bba7e0f643d21a10efc367">expired</a>(<a class="code" href="a00067.html">const_iterator</a> pos,
<a name="l00436"></a>00436                         <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>&amp; period,
<a name="l00437"></a>00437                         <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>&amp; now = <a class="code" href="a00170.html#3cec049068a76d398d51c7a7e871f456">TimeVal::now</a>())<span class="keyword"> const </span>{
<a name="l00438"></a>00438         <span class="keywordflow">return</span> (pos)-&gt;expired(Dim, pos.<a class="code" href="a00067.html#d4201914499384e84deda988525350fa">key</a>(), period, now);
<a name="l00439"></a>00439       }
<a name="l00440"></a>00440 
<a name="l00441"></a><a class="code" href="a00087.html#558f9f6313e73ef5e7c0f2840a981d6f">00441</a>       <span class="keywordtype">void</span>      <a class="code" href="a00087.html#558f9f6313e73ef5e7c0f2840a981d6f">add_key</a>(<span class="keyword">const</span> Key&amp; k) {
<a name="l00442"></a>00442         assert(<a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.find(k) == <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end());
<a name="l00443"></a>00443         <span class="keyword">typename</span> setmap_t::value_type   new_entry(k, <a class="code" href="a00087.html#d2e77a67958dd3607f50e4dec34adb5f">set_t</a>(Comp(Dim, k)));
<a name="l00444"></a>00444         <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">Set::iterator</a> i = <a class="code" href="a00087.html#5c605a7bbd7fd853a2507537f84845bb">s_</a>.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(); i != <a class="code" href="a00087.html#5c605a7bbd7fd853a2507537f84845bb">s_</a>.<a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(); ++i)
<a name="l00445"></a>00445           new_entry.second.insert(i);
<a name="l00446"></a>00446         <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.insert(new_entry);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448       }
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="a00087.html#5b423f980f06a02e4e11a06cbe2878c0">00450</a>       <span class="keywordtype">void</span>      <a class="code" href="a00087.html#5b423f980f06a02e4e11a06cbe2878c0">remove_key</a>(<span class="keyword">const</span> Key&amp; k) {
<a name="l00451"></a>00451         <span class="keyword">typename</span> setmap_t::iterator     x = <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.find(k);
<a name="l00452"></a>00452         assert(x != <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.end());
<a name="l00453"></a>00453         <span class="keywordflow">for</span> (<span class="keyword">typename</span> set_t::iterator i = x-&gt;second.begin();
<a name="l00454"></a>00454              i != x-&gt;second.end(); ++i)
<a name="l00455"></a>00455           const_cast&lt;Value&amp;&gt;(**i).remove_stamp(Dim, k);
<a name="l00456"></a>00456         <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>.erase(x);
<a name="l00457"></a>00457       }
<a name="l00458"></a>00458     <span class="keyword">private</span>:
<a name="l00459"></a><a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">00459</a>       <a class="code" href="a00087.html#46c12b9858cdc4b0236c30ae3416aa40">setmap_t</a>          <a class="code" href="a00087.html#1b4b68b1f4390aa13e2784efc153acec">m_</a>;
<a name="l00460"></a><a class="code" href="a00087.html#4806d90a1c66b0feffe33033b189e578">00460</a>       <span class="keyword">const</span> <a class="code" href="a00087.html#9a789f7d60aaefb880db74276ac553ce">IterComp</a>&amp;   <a class="code" href="a00087.html#4806d90a1c66b0feffe33033b189e578">c_</a>;
<a name="l00461"></a><a class="code" href="a00087.html#5c605a7bbd7fd853a2507537f84845bb">00461</a>       <span class="keyword">const</span> <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp;        <a class="code" href="a00087.html#5c605a7bbd7fd853a2507537f84845bb">s_</a>;
<a name="l00462"></a>00462     };
<a name="l00463"></a>00463 
<a name="l00464"></a>00464     <span class="keyword">template</span> &lt;<span class="keyword">class</span>&gt; <span class="keyword">struct </span>MSAdapt;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <span class="keyword">template</span> &lt;<span class="keyword">class</span>&gt; <span class="keyword">struct </span>MultiAdapt;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00152.html" title="Simple generic set.">Set</a>,
<a name="l00469"></a>00469               <span class="keyword">class </span>Action = <a class="code" href="a00123.html">NoAction&lt;Set&gt;</a>,
<a name="l00470"></a>00470               <span class="keyword">class </span>Predicate = <a class="code" href="a00024.html">DefaultPredicate&lt;Set&gt;</a>,
<a name="l00471"></a>00471               <span class="keyword">class </span>ActionSet = <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&gt;
<a name="l00472"></a><a class="code" href="a00162.html">00472</a>     <span class="keyword">class </span><a class="code" href="a00162.html">Subset</a> {
<a name="l00473"></a><a class="code" href="a00162.html#a9714d68f91307239a78b0466fe85fe1">00473</a>       <span class="keyword">typedef</span> <a class="code" href="a00162.html">Subset&lt;Set, Action, Predicate, ActionSet&gt;</a>         <a class="code" href="a00162.html">This</a>;
<a name="l00474"></a><a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">00474</a>       <span class="keyword">typedef</span> <a class="code" href="a00075.html">MaskIterator&lt;Set, Action, Predicate, ActionSet&gt;</a>   <a class="code" href="a00075.html">e_iterator_</a>;
<a name="l00475"></a><a class="code" href="a00162.html#98bf1af5975059ecc88ffaf867839e9f">00475</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">DeconstIterator&lt;e_iterator_&gt;</a>                      <a class="code" href="a00023.html">m_iterator_</a>;
<a name="l00476"></a>00476     <span class="keyword">public</span>:
<a name="l00477"></a><a class="code" href="a00162.html#2b3ec51e5b442b8c0f3a3caa7232903b">00477</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">Set::iterator</a>    <a class="code" href="a00162.html#2b3ec51e5b442b8c0f3a3caa7232903b">set_iterator</a>;
<a name="l00478"></a><a class="code" href="a00162.html#75a7e16d650913e847427e5055e94cec">00478</a>       <span class="keyword">typedef</span> <a class="code" href="a00075.html">e_iterator_</a>               <a class="code" href="a00075.html">mask_iterator</a>;
<a name="l00479"></a><a class="code" href="a00162.html#a3d4c5d8b49ca05eef1cb88b5f96120d">00479</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type  <a class="code" href="a00162.html#a3d4c5d8b49ca05eef1cb88b5f96120d">value_type</a>;
<a name="l00480"></a><a class="code" href="a00162.html#a473bea6c960314c8df84cedc7727e0b">00480</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">m_iterator_</a>               <a class="code" href="a00023.html">iterator</a>;
<a name="l00481"></a><a class="code" href="a00162.html#3abd60044776b0ba1172f5e72f64242a">00481</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">iterator</a>                  <a class="code" href="a00023.html">const_iterator</a>;
<a name="l00482"></a>00482 
<a name="l00483"></a><a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">00483</a>       <a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">Subset</a>(<a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00484"></a>00484         : <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>(s),
<a name="l00485"></a>00485           <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>(s)
<a name="l00486"></a>00486       {}
<a name="l00487"></a>00487 
<a name="l00488"></a><a class="code" href="a00162.html#495e991bc94e5a099e937f16454c75d8">00488</a>       <a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">Subset</a>(ActionSet&amp; as, <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00489"></a>00489         : <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>(as),
<a name="l00490"></a>00490           <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>(s)
<a name="l00491"></a>00491       {}
<a name="l00492"></a>00492 
<a name="l00493"></a><a class="code" href="a00162.html#1477b141cda62051d2fe192bd35a00ed">00493</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#1477b141cda62051d2fe192bd35a00ed">begin</a>() {
<a name="l00494"></a>00494         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(),
<a name="l00495"></a>00495                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>).skip());
<a name="l00496"></a>00496       }
<a name="l00497"></a>00497 
<a name="l00498"></a><a class="code" href="a00162.html#2b6b14e5fad245ff0480c0c2b0cce847">00498</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#2b6b14e5fad245ff0480c0c2b0cce847">end</a>() {
<a name="l00499"></a>00499         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(),
<a name="l00500"></a>00500                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>));
<a name="l00501"></a>00501       }
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="a00162.html#cf0b62af8831678a2996617d79bdd9c8">00503</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#cf0b62af8831678a2996617d79bdd9c8">find</a>(<span class="keyword">const</span> <span class="keyword">typename</span> Set::value_type&amp; x) {
<a name="l00504"></a>00504         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#f477956791cd929a6224b798f1b7dbff">find</a>(x),
<a name="l00505"></a>00505                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>).check());
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507 
<a name="l00508"></a><a class="code" href="a00162.html#0492eea11e9c003c127ecaec4f2cba91">00508</a>       <span class="keywordtype">void</span>      <a class="code" href="a00162.html#0492eea11e9c003c127ecaec4f2cba91">cleanup</a>() {
<a name="l00509"></a>00509         <span class="keywordflow">for</span> (<a class="code" href="a00023.html">iterator</a> i = <a class="code" href="a00162.html#1477b141cda62051d2fe192bd35a00ed">begin</a>(); i != <a class="code" href="a00162.html#2b6b14e5fad245ff0480c0c2b0cce847">end</a>(); ++i);
<a name="l00510"></a>00510       }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512     <span class="keyword">private</span>:
<a name="l00513"></a><a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">00513</a>       ActionSet&amp;        <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>;
<a name="l00514"></a><a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">00514</a>       <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp;              <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>;
<a name="l00515"></a>00515     };
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00152.html" title="Simple generic set.">Set</a>,
<a name="l00518"></a>00518               <span class="keyword">class </span>Action,
<a name="l00519"></a>00519               <span class="keyword">class </span>Predicate,
<a name="l00520"></a>00520               <span class="keyword">class </span>ActionSet&gt;
<a name="l00521"></a><a class="code" href="a00164.html">00521</a>     <span class="keyword">class </span><a class="code" href="a00162.html">Subset</a>&lt;MultiAdapt&lt;<a class="code" href="a00152.html" title="Simple generic set.">Set</a>&gt;, Action, Predicate, ActionSet&gt; {
<a name="l00522"></a><a class="code" href="a00164.html#0d91a0c9be505ad1729b1db6fbd8a299">00522</a>       <span class="keyword">typedef</span> <a class="code" href="a00162.html">Subset&lt;MultiAdapt&lt;Set&gt;</a>, Action, Predicate, ActionSet&gt;     <a class="code" href="a00164.html">This</a>;
<a name="l00523"></a><a class="code" href="a00164.html#9916e3b6862c20990e9c588b7b4ec3d8">00523</a>       <span class="keyword">typedef</span> <a class="code" href="a00075.html">MaskIterator&lt;Set, Action, Predicate, ActionSet&gt;</a>   <a class="code" href="a00075.html">e_iterator_</a>;
<a name="l00524"></a><a class="code" href="a00164.html#8e538305129fba1fbdf6c72f65219c23">00524</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">DeconstIterator&lt;e_iterator_&gt;</a>                      <a class="code" href="a00023.html">m_iterator_</a>;
<a name="l00525"></a>00525     <span class="keyword">public</span>:
<a name="l00526"></a><a class="code" href="a00164.html#23fdd9a39ee1029a8a237e8692768457">00526</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">Set::iterator</a>    <a class="code" href="a00162.html#2b3ec51e5b442b8c0f3a3caa7232903b">set_iterator</a>;
<a name="l00527"></a><a class="code" href="a00164.html#b7c4527f84c204747a6d4e5e1f734a37">00527</a>       <span class="keyword">typedef</span> <a class="code" href="a00075.html">e_iterator_</a>               <a class="code" href="a00075.html">mask_iterator</a>;
<a name="l00528"></a><a class="code" href="a00164.html#b5cb5bf19f17b7034d9d191edc4ce153">00528</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type  <a class="code" href="a00162.html#a3d4c5d8b49ca05eef1cb88b5f96120d">value_type</a>;
<a name="l00529"></a><a class="code" href="a00164.html#99cd78a3fd56124b66dfea91673d5cf0">00529</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">m_iterator_</a>               <a class="code" href="a00023.html">iterator</a>;
<a name="l00530"></a><a class="code" href="a00164.html#e0039fad85543218e051a00683e56c78">00530</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">iterator</a>                  <a class="code" href="a00023.html">const_iterator</a>;
<a name="l00531"></a>00531 
<a name="l00532"></a><a class="code" href="a00164.html#136326d6580fa65b19f8ace1594ecde2">00532</a>       <a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">Subset</a>(<a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00533"></a>00533         : <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>(s),
<a name="l00534"></a>00534           <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>(s)
<a name="l00535"></a>00535       {}
<a name="l00536"></a>00536 
<a name="l00537"></a><a class="code" href="a00164.html#3d6d04c08a5ab8bcb669839cef131dbe">00537</a>       <a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">Subset</a>(ActionSet&amp; as, <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00538"></a>00538         : <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>(as),
<a name="l00539"></a>00539           <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>(s)
<a name="l00540"></a>00540       {}
<a name="l00541"></a>00541 
<a name="l00542"></a><a class="code" href="a00164.html#c4dca5ec65c6abb09ccced757f17036c">00542</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#1477b141cda62051d2fe192bd35a00ed">begin</a>() {
<a name="l00543"></a>00543         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(),
<a name="l00544"></a>00544                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>).skip());
<a name="l00545"></a>00545       }
<a name="l00546"></a>00546 
<a name="l00547"></a><a class="code" href="a00164.html#0eae48861ba3136fea80b3c76c373e50">00547</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#2b6b14e5fad245ff0480c0c2b0cce847">end</a>() {
<a name="l00548"></a>00548         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(),
<a name="l00549"></a>00549                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>));
<a name="l00550"></a>00550       }
<a name="l00551"></a>00551 
<a name="l00552"></a>00552       std::pair&lt;iterator, iterator&gt;
<a name="l00553"></a><a class="code" href="a00164.html#a01e598cafbbf1c461b727ba10a2c753">00553</a>       equal_range(<span class="keyword">const</span> <span class="keyword">typename</span> Set::value_type&amp; x) {
<a name="l00554"></a>00554         std::pair&lt;set_iterator, set_iterator&gt;   p = <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.equal_range(x);
<a name="l00555"></a>00555         <span class="keywordflow">return</span> std::pair&lt;iterator, iterator&gt;(<a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(p.first, <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>).skip()),
<a name="l00556"></a>00556                                              <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(p.second, <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>).skip()));
<a name="l00557"></a>00557       }
<a name="l00558"></a>00558     <span class="keyword">private</span>:
<a name="l00559"></a><a class="code" href="a00164.html#d17662381e20804515fab5d6add71873">00559</a>       ActionSet&amp;        <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>;
<a name="l00560"></a><a class="code" href="a00164.html#e40c15c58dadb993c185e4fe3e939092">00560</a>       <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp;              <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>;
<a name="l00561"></a>00561     };
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00152.html" title="Simple generic set.">Set</a>,
<a name="l00564"></a>00564               <span class="keyword">class </span>Action, <span class="keyword">class </span>Predicate, <span class="keyword">class </span>ActionSet&gt;
<a name="l00565"></a><a class="code" href="a00163.html">00565</a>     <span class="keyword">class </span><a class="code" href="a00162.html">Subset</a>&lt;MSAdapt&lt;<a class="code" href="a00152.html" title="Simple generic set.">Set</a>&gt;, Action, Predicate, ActionSet&gt; {
<a name="l00566"></a><a class="code" href="a00163.html#1803de80f66fa4ef139746af6f24d9a1">00566</a>       <span class="keyword">typedef</span> <a class="code" href="a00162.html">Subset&lt;MSAdapt&lt;Set&gt;</a>, Action, Predicate, ActionSet&gt;        <a class="code" href="a00163.html">This</a>;
<a name="l00567"></a><a class="code" href="a00163.html#82a6194ec37d4d3fa8467bee2ee6730f">00567</a>       <span class="keyword">typedef</span> <a class="code" href="a00075.html">MaskIterator&lt;MSAdapt&lt;Set&gt;</a>, Action, Predicate, ActionSet&gt;  <a class="code" href="a00076.html">e_iterator_</a>;
<a name="l00568"></a><a class="code" href="a00163.html#fbb134af202debf4bc3eaa9d746ef82b">00568</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">DeconstIterator&lt;e_iterator_&gt;</a>                      <a class="code" href="a00023.html">m_iterator_</a>;
<a name="l00569"></a>00569     <span class="keyword">public</span>:
<a name="l00570"></a><a class="code" href="a00163.html#10d0a3324231c86caa5ce7e4fb895480">00570</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::key_type    key_type;
<a name="l00571"></a><a class="code" href="a00163.html#233b98af8c47fea71d68b78287fba21c">00571</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type  <a class="code" href="a00162.html#a3d4c5d8b49ca05eef1cb88b5f96120d">value_type</a>;
<a name="l00572"></a><a class="code" href="a00163.html#0259c898d28e97dae38cdd49b75475d5">00572</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00152.html#70e3d7d682697841fd03c0dcaf901504">Set::iterator</a>    <a class="code" href="a00162.html#2b3ec51e5b442b8c0f3a3caa7232903b">set_iterator</a>;
<a name="l00573"></a><a class="code" href="a00163.html#8b06072a00aa0edaef5aff681ba2ac90">00573</a>       <span class="keyword">typedef</span> <a class="code" href="a00076.html">e_iterator_</a>               <a class="code" href="a00076.html">mask_iterator</a>;
<a name="l00574"></a><a class="code" href="a00163.html#f3bc732ff2d6d62aa664a47c3fed1a0f">00574</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">m_iterator_</a>               <a class="code" href="a00023.html">iterator</a>;
<a name="l00575"></a><a class="code" href="a00163.html#42a20280a94a8c7288f5852de678a304">00575</a>       <span class="keyword">typedef</span> <a class="code" href="a00023.html">iterator</a>                  <a class="code" href="a00023.html">const_iterator</a>;
<a name="l00576"></a>00576 
<a name="l00577"></a><a class="code" href="a00163.html#c25b7142ffc4319b3c0774b6de1442c6">00577</a>       <a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">Subset</a>(<a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00578"></a>00578         : <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>(s),
<a name="l00579"></a>00579           <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>(s)
<a name="l00580"></a>00580       {}
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="a00163.html#41698a63abe580842a35f10891a0b64f">00582</a>       <a class="code" href="a00162.html#c52c7750a56c573b8d95339849fdbad2">Subset</a>(ActionSet&amp; as, <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp; s)
<a name="l00583"></a>00583         : <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>(as),
<a name="l00584"></a>00584           <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>(s)
<a name="l00585"></a>00585       {}
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="a00163.html#63952d98ea7537177014e5c5d64caf38">00587</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#1477b141cda62051d2fe192bd35a00ed">begin</a>(<span class="keyword">const</span> key_type&amp; k) {
<a name="l00588"></a>00588         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#6e0a702a8fd49818a57afa65888a00f3">begin</a>(k),
<a name="l00589"></a>00589                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>, k).skip());
<a name="l00590"></a>00590       }
<a name="l00591"></a>00591 
<a name="l00592"></a><a class="code" href="a00163.html#1f40524fb8ceb4d9babfee40f0f1cbe1">00592</a>       <a class="code" href="a00023.html">iterator</a>  <a class="code" href="a00162.html#2b6b14e5fad245ff0480c0c2b0cce847">end</a>(<span class="keyword">const</span> key_type&amp; k) {
<a name="l00593"></a>00593         <span class="keywordflow">return</span> <a class="code" href="a00023.html#bd365644f94d0556fa452560b2b10828">m_iterator_::build</a>(<a class="code" href="a00162.html#ac2b4f00ad93eeda24d7e3bd86e313d8">e_iterator_</a>(<a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.<a class="code" href="a00152.html#cdd75d0e19986de9572c6e9489550875">end</a>(k),
<a name="l00594"></a>00594                                               <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>, <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>, k));
<a name="l00595"></a>00595       }
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="a00163.html#55a1c94f986929cd7dd9d842941f6445">00597</a>       <span class="keywordtype">void</span>      set_stamp(<a class="code" href="a00023.html">const_iterator</a> pos,
<a name="l00598"></a>00598                           <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>&amp; now = <a class="code" href="a00170.html#3cec049068a76d398d51c7a7e871f456">TimeVal::now</a>()) {
<a name="l00599"></a>00599         <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.set_stamp(pos, now);
<a name="l00600"></a>00600       }
<a name="l00601"></a>00601 
<a name="l00602"></a><a class="code" href="a00163.html#a8c3238d9f05ca4ff9a0666df993afff">00602</a>       <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>     stamp(<a class="code" href="a00023.html">const_iterator</a> pos)<span class="keyword"> const </span>{
<a name="l00603"></a>00603         <span class="keywordflow">return</span> <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.stamp(pos);
<a name="l00604"></a>00604       }
<a name="l00605"></a>00605 
<a name="l00606"></a><a class="code" href="a00163.html#37bddffbd0ab6f0e8989af78cd44d64c">00606</a>       <span class="keywordtype">bool</span>      expired(<a class="code" href="a00023.html">const_iterator</a> pos,
<a name="l00607"></a>00607                         <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>&amp; period,
<a name="l00608"></a>00608                         <span class="keyword">const</span> <a class="code" href="a00170.html" title="Proxy class for the timeval standard C data structure.">TimeVal</a>&amp; now = <a class="code" href="a00170.html#3cec049068a76d398d51c7a7e871f456">TimeVal::now</a>())<span class="keyword"> const </span>{
<a name="l00609"></a>00609         <span class="keywordflow">return</span> <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>.expired(pos, period, now);
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611     <span class="keyword">private</span>:
<a name="l00612"></a><a class="code" href="a00163.html#43acdfbdb926e23e4be892f219aeaabf">00612</a>       ActionSet&amp;        <a class="code" href="a00162.html#1eb42d664a6c69a934fb3a5574f7ac63">actionset_</a>;
<a name="l00613"></a><a class="code" href="a00163.html#b3ff1043304bc6be95708a506d16b287">00613</a>       <a class="code" href="a00152.html" title="Simple generic set.">Set</a>&amp;              <a class="code" href="a00162.html#93d412efaaf427a104fc923741b4fc32">set_</a>;
<a name="l00614"></a>00614     };
<a name="l00615"></a>00615 
<a name="l00616"></a>00616   } <span class="comment">// namespace utl</span>
<a name="l00617"></a>00617 
<a name="l00618"></a>00618 } <span class="comment">// namespace olsr</span>
<a name="l00619"></a>00619 
<a name="l00620"></a>00620 <span class="preprocessor">#endif // ! QOLYESTER_UTL_SET_HH</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Feb 12 20:45:37 2009 for Qolyester daemon by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
