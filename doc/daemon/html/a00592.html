<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Qolyester daemon: set.hh Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>set.hh</h1><a href="a00471.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (C) 2003, 2004, 2005 Laboratoire de Recherche en Informatique</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">// This file is part of Qolyester.</span>
<a name="l00004"></a>00004 
<a name="l00005"></a>00005 <span class="comment">// Qolyester is free software; you can redistribute it and/or</span>
<a name="l00006"></a>00006 <span class="comment">// modify it under the terms of the GNU General Public License</span>
<a name="l00007"></a>00007 <span class="comment">// as published by the Free Software Foundation; either version 2</span>
<a name="l00008"></a>00008 <span class="comment">// of the License, or (at your option) any later version.</span>
<a name="l00009"></a>00009 
<a name="l00010"></a>00010 <span class="comment">// Qolyester is distributed in the hope that it will be useful,</span>
<a name="l00011"></a>00011 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00012"></a>00012 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00013"></a>00013 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00016"></a>00016 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00017"></a>00017 <span class="comment">// Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span>
<a name="l00018"></a>00018 
<a name="l00026"></a>00026 
<a name="l00027"></a>00027 <span class="preprocessor">#ifndef QOLYESTER_UTL_SET_HH</span>
<a name="l00028"></a><a class="code" href="a00471.html#a29e12403718077d9a0f42263eacdde7">00028</a> <span class="preprocessor"></span><span class="preprocessor"># define QOLYESTER_UTL_SET_HH 1</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span>
<a name="l00030"></a>00030 <span class="preprocessor"># include &lt;set&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor"># include &lt;map&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor"># include "<a class="code" href="a00428.html">iterator.hh</a>"</span>
<a name="l00033"></a>00033 <span class="preprocessor"># include "<a class="code" href="a00437.html">meta.hh</a>"</span>
<a name="l00034"></a>00034 <span class="preprocessor"># include "<a class="code" href="a00394.html">comparator.hh</a>"</span>
<a name="l00035"></a>00035 <span class="preprocessor"># include "<a class="code" href="a00474.html">stampable.hh</a>"</span>
<a name="l00036"></a>00036 
<a name="l00037"></a>00037 <span class="keyword">namespace </span>olsr {
<a name="l00038"></a>00038 
<a name="l00039"></a>00039   <span class="keyword">namespace </span>sch {
<a name="l00040"></a>00040     <span class="keyword">class </span>StatePrinter;
<a name="l00041"></a>00041   }
<a name="l00042"></a>00042 
<a name="l00043"></a>00043   <span class="keyword">namespace </span>utl {
<a name="l00044"></a>00044 
<a name="l00045"></a>00045     <span class="keyword">namespace </span>internal {
<a name="l00046"></a>00046 
<a name="l00047"></a>00047       <span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;
<a name="l00048"></a><a class="code" href="a00216.html">00048</a>       <span class="keyword">struct </span><a class="code" href="a00216.html">builder</a> {
<a name="l00049"></a><a class="code" href="a00216.html#2f201643dda4e0111cea42c15b1c1131">00049</a>         <span class="keyword">static</span> T <a class="code" href="a00216.html#2f201643dda4e0111cea42c15b1c1131">make</a>(<span class="keyword">const</span> T&amp; x) {
<a name="l00050"></a>00050           <span class="keywordflow">return</span> T(x);
<a name="l00051"></a>00051         }
<a name="l00052"></a>00052       };
<a name="l00053"></a>00053 
<a name="l00054"></a>00054       <span class="keyword">template</span> &lt;<span class="keyword">class</span> Iter&gt;
<a name="l00055"></a><a class="code" href="a00217.html">00055</a>       <span class="keyword">struct </span><a class="code" href="a00216.html">builder</a>&lt;DeconstIterator&lt;Iter&gt; &gt; {
<a name="l00056"></a><a class="code" href="a00217.html#bacb3c4e635f91ab2029ed0b6c2136c6">00056</a>         <span class="keyword">static</span> <a class="code" href="a00228.html">DeconstIterator&lt;Iter&gt;</a> <a class="code" href="a00216.html#2f201643dda4e0111cea42c15b1c1131">make</a>(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00057"></a>00057           <span class="keywordflow">return</span> <a class="code" href="a00228.html">DeconstIterator&lt;Iter&gt;::build</a>(x);
<a name="l00058"></a>00058         }
<a name="l00059"></a>00059       };
<a name="l00060"></a>00060 
<a name="l00061"></a>00061     } <span class="comment">// namespace internal</span>
<a name="l00062"></a>00062 
<a name="l00071"></a>00071     <span class="keyword">template</span> &lt;<span class="keyword">class </span>Elem, <span class="keyword">class </span>Iset,
<a name="l00072"></a>00072               <span class="keyword">class </span>Iter = <span class="keyword">typename</span> Iset::iterator,
<a name="l00073"></a>00073               <span class="keyword">class </span>CIter = <span class="keyword">typename</span> Iset::const_iterator&gt;
<a name="l00074"></a><a class="code" href="a00355.html">00074</a>     <span class="keyword">class </span><a class="code" href="a00355.html">Set</a> {
<a name="l00075"></a><a class="code" href="a00355.html#f90979d83c74bac6d33d7e8af7e13ad3">00075</a>       <span class="keyword">typedef</span> <a class="code" href="a00355.html">Set&lt;Elem, Iset, Iter, CIter&gt;</a>      <a class="code" href="a00355.html">This</a>;
<a name="l00076"></a><a class="code" href="a00355.html#c15aa97611aa5bd331e338098f371101">00076</a>       <span class="keyword">typedef</span> Iset                              <a class="code" href="a00355.html#c15aa97611aa5bd331e338098f371101">set_t</a>;
<a name="l00077"></a>00077     <span class="keyword">public</span>:
<a name="l00078"></a><a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">00078</a>       <span class="keyword">typedef</span> CIter                     <a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">const_iterator</a>;
<a name="l00079"></a><a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">00079</a>       <span class="keyword">typedef</span> Iter                      <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="a00355.html#36697f71793136f7d79b2c80396f28f9">00081</a>       <a class="code" href="a00355.html#36697f71793136f7d79b2c80396f28f9">Set</a>() : <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>() {}
<a name="l00082"></a>00082 
<a name="l00087"></a><a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">00087</a>       <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a>  <a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>() { <span class="keywordflow">return</span> <a class="code" href="a00216.html">internal::builder&lt;Iter&gt;::make</a>(<a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.begin()); }
<a name="l00088"></a>00088 
<a name="l00093"></a><a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">00093</a>       <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a>  <a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">end</a>() { <span class="keywordflow">return</span> <a class="code" href="a00216.html">internal::builder&lt;Iter&gt;::make</a>(<a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.end()); }
<a name="l00094"></a>00094 
<a name="l00100"></a><a class="code" href="a00355.html#327240b5981fc4ab821e4571ba49e53f">00100</a>       <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a>  <a class="code" href="a00355.html#327240b5981fc4ab821e4571ba49e53f">find</a>(<span class="keyword">const</span> Elem&amp; e) {
<a name="l00101"></a>00101         <span class="keywordflow">return</span> <a class="code" href="a00216.html">internal::builder&lt;Iter&gt;::make</a>(<a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.find(e));
<a name="l00102"></a>00102       }
<a name="l00103"></a>00103 
<a name="l00108"></a><a class="code" href="a00355.html#8d62e4c746fb09897b189f739085272e">00108</a>       <a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">const_iterator</a>    <a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>()<span class="keyword"> const </span>{
<a name="l00109"></a>00109         <span class="keywordflow">return</span> <a class="code" href="a00216.html">internal::builder&lt;CIter&gt;::make</a>(<a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.begin());
<a name="l00110"></a>00110       }
<a name="l00111"></a>00111 
<a name="l00116"></a><a class="code" href="a00355.html#a4b7d129aea436138cf7bdcbc146b8cc">00116</a>       <a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">const_iterator</a>    <a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">end</a>()<span class="keyword"> const </span>{
<a name="l00117"></a>00117         <span class="keywordflow">return</span> <a class="code" href="a00216.html">internal::builder&lt;CIter&gt;::make</a>(<a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.end());
<a name="l00118"></a>00118       }
<a name="l00119"></a>00119 
<a name="l00125"></a><a class="code" href="a00355.html#72c907a82e25363ffb4c3991692b633c">00125</a>       <a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">const_iterator</a>    <a class="code" href="a00355.html#327240b5981fc4ab821e4571ba49e53f">find</a>(<span class="keyword">const</span> Elem&amp; e)<span class="keyword"> const </span>{
<a name="l00126"></a>00126         <span class="keywordflow">return</span> <a class="code" href="a00216.html">internal::builder&lt;CIter&gt;::make</a>(<a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.find(e));
<a name="l00127"></a>00127       }
<a name="l00128"></a>00128 
<a name="l00135"></a><a class="code" href="a00355.html#b5c1552975e742575dbd6d11b77611ec">00135</a>       std::pair&lt;iterator, bool&gt; <a class="code" href="a00355.html#b5c1552975e742575dbd6d11b77611ec">insert</a>(<span class="keyword">const</span> Elem&amp; e) {
<a name="l00136"></a>00136         std::pair&lt;typename Iset::iterator, bool&gt;        p =
<a name="l00137"></a>00137           <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.insert(e);
<a name="l00138"></a>00138         <span class="keywordflow">return</span> std::pair&lt;iterator, bool&gt;(<a class="code" href="a00216.html">internal::builder&lt;Iter&gt;::make</a>(p.first),
<a name="l00139"></a>00139                                          p.second);
<a name="l00140"></a>00140       }
<a name="l00141"></a>00141 
<a name="l00145"></a>00145       <span class="keyword">template</span> &lt;<span class="keyword">class</span> InputIterator&gt;
<a name="l00146"></a><a class="code" href="a00355.html#27ff912ccbdc61ce1d267c6ff762fda9">00146</a>       <span class="keywordtype">void</span>                      <a class="code" href="a00355.html#b5c1552975e742575dbd6d11b77611ec">insert</a>(InputIterator f, InputIterator l) {
<a name="l00147"></a>00147         <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.insert(f, l);
<a name="l00148"></a>00148       }
<a name="l00153"></a><a class="code" href="a00355.html#9e0f2d821c59b19e5e3f35145afd611f">00153</a>       <span class="keywordtype">void</span>                      <a class="code" href="a00355.html#9e0f2d821c59b19e5e3f35145afd611f">erase</a>(<a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a> pos) { <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.erase(pos); }
<a name="l00154"></a>00154 
<a name="l00159"></a><a class="code" href="a00355.html#f7ceb8aaa5d8c17882faf34d479ee118">00159</a>       <span class="keywordtype">void</span>                      <a class="code" href="a00355.html#9e0f2d821c59b19e5e3f35145afd611f">erase</a>(<span class="keyword">const</span> Elem&amp; e) { <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.erase(e); }
<a name="l00160"></a>00160 
<a name="l00165"></a><a class="code" href="a00355.html#220653ee2e3b45b8f20e67d3e5991f38">00165</a>       <span class="keywordtype">bool</span>      <a class="code" href="a00355.html#220653ee2e3b45b8f20e67d3e5991f38">empty</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.empty(); }
<a name="l00166"></a>00166 
<a name="l00167"></a>00167       <span class="keyword">typename</span> set_t::size_type
<a name="l00168"></a><a class="code" href="a00355.html#e94f7b69c7f1fb00bd2d0229a0e78d81">00168</a>       <a class="code" href="a00355.html#e94f7b69c7f1fb00bd2d0229a0e78d81">size</a>()<span class="keyword"> const</span>
<a name="l00169"></a>00169 <span class="keyword">      </span>{
<a name="l00170"></a>00170         <span class="keywordflow">return</span> <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>.size();
<a name="l00171"></a>00171       }
<a name="l00172"></a>00172 
<a name="l00176"></a><a class="code" href="a00355.html#fd2533b0972f78295ecee213c3907cfb">00176</a>       <span class="keywordtype">bool</span>      <a class="code" href="a00355.html#fd2533b0972f78295ecee213c3907cfb">operator[]</a>(<span class="keyword">const</span> Elem&amp; e)<span class="keyword"> const </span>{
<a name="l00177"></a>00177         <span class="keywordflow">return</span> <a class="code" href="a00355.html#327240b5981fc4ab821e4571ba49e53f">find</a>(e) != <a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">end</a>();
<a name="l00178"></a>00178       }
<a name="l00179"></a>00179 
<a name="l00180"></a><a class="code" href="a00355.html#efac1b32c17837805dbf682b09d04d33">00180</a>       <a class="code" href="a00355.html">This</a>&amp;     <a class="code" href="a00355.html#efac1b32c17837805dbf682b09d04d33">operator|=</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">This</a>&amp; rhs) {
<a name="l00181"></a>00181         <span class="keywordflow">for</span> (<a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">const_iterator</a> i = rhs.<a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>(); i != rhs.<a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">end</a>(); ++i)
<a name="l00182"></a>00182           <a class="code" href="a00355.html#b5c1552975e742575dbd6d11b77611ec">insert</a>(*i);
<a name="l00183"></a>00183         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00184"></a>00184       }
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="a00355.html#da387bf08391a089a574e8d3ed35787f">00186</a>       <a class="code" href="a00355.html">This</a>      <a class="code" href="a00355.html#da387bf08391a089a574e8d3ed35787f">operator|</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">This</a>&amp; rhs)<span class="keyword"> const </span>{
<a name="l00187"></a>00187         <span class="keywordflow">return</span> <a class="code" href="a00355.html#f90979d83c74bac6d33d7e8af7e13ad3">This</a>(*<span class="keyword">this</span>) |= rhs;
<a name="l00188"></a>00188       }
<a name="l00189"></a>00189 
<a name="l00190"></a><a class="code" href="a00355.html#da69b6d6486c222da7c991e862e65de5">00190</a>       <a class="code" href="a00355.html">This</a>&amp;     <a class="code" href="a00355.html#da69b6d6486c222da7c991e862e65de5">operator-=</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">This</a>&amp; rhs) {
<a name="l00191"></a>00191         <span class="keywordflow">for</span> (<a class="code" href="a00355.html#6603aa9ab9682035dd4ed4219995702d">const_iterator</a> i = rhs.<a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>(); i != rhs.<a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">end</a>(); ++i)
<a name="l00192"></a>00192           <a class="code" href="a00355.html#9e0f2d821c59b19e5e3f35145afd611f">erase</a>(*i);
<a name="l00193"></a>00193         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00194"></a>00194       }
<a name="l00195"></a>00195 
<a name="l00196"></a><a class="code" href="a00355.html#1c9db11247d7e86e974fe46841196434">00196</a>       <a class="code" href="a00355.html">This</a>      <a class="code" href="a00355.html#1c9db11247d7e86e974fe46841196434">operator-</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">This</a>&amp; rhs)<span class="keyword"> const </span>{
<a name="l00197"></a>00197         <span class="keywordflow">return</span> <a class="code" href="a00355.html#f90979d83c74bac6d33d7e8af7e13ad3">This</a>(*<span class="keyword">this</span>) -= rhs;
<a name="l00198"></a>00198       }
<a name="l00199"></a>00199 
<a name="l00200"></a><a class="code" href="a00355.html#e7aa93a3f809acefac5e6f83d8674f48">00200</a>       <a class="code" href="a00355.html">This</a>&amp;     <a class="code" href="a00355.html#e7aa93a3f809acefac5e6f83d8674f48">operator&amp;=</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">This</a>&amp; rhs) {
<a name="l00201"></a>00201         <span class="keywordflow">for</span> (<a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a> i = <a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>(); i != <a class="code" href="a00355.html#f8e090368c70931cee85fe55c9f7a2ae">end</a>(); <span class="comment">/* ++i elsewhere */</span>)
<a name="l00202"></a>00202           <span class="keywordflow">if</span> (!rhs[*i]) {
<a name="l00203"></a>00203             <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">iterator</a> tmp = i++;
<a name="l00204"></a>00204             <a class="code" href="a00355.html#9e0f2d821c59b19e5e3f35145afd611f">erase</a>(tmp);
<a name="l00205"></a>00205           } <span class="keywordflow">else</span>
<a name="l00206"></a>00206             ++i;
<a name="l00207"></a>00207         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00208"></a>00208       }
<a name="l00209"></a>00209 
<a name="l00210"></a><a class="code" href="a00355.html#e55a4a768811b290b8c775fb9db4b5f5">00210</a>       <a class="code" href="a00355.html">This</a>      <a class="code" href="a00355.html#e55a4a768811b290b8c775fb9db4b5f5">operator&amp;</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">This</a>&amp; rhs)<span class="keyword"> const </span>{
<a name="l00211"></a>00211         <span class="keywordflow">return</span> <a class="code" href="a00355.html#f90979d83c74bac6d33d7e8af7e13ad3">This</a>(*<span class="keyword">this</span>) &amp;= rhs;
<a name="l00212"></a>00212       }
<a name="l00213"></a>00213     <span class="keyword">private</span>:
<a name="l00214"></a><a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">00214</a>       <a class="code" href="a00355.html#c15aa97611aa5bd331e338098f371101">set_t</a>     <a class="code" href="a00355.html#44d77cef9e11d56d12ffff8c8f8594e7">set_</a>;
<a name="l00215"></a>00215 
<a name="l00216"></a><a class="code" href="a00355.html#4c479a0caf818dfe6b8fb90f220982b1">00216</a>       <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="a00361.html">sch::StatePrinter</a>;
<a name="l00217"></a>00217 
<a name="l00218"></a>00218     };
<a name="l00219"></a>00219 
<a name="l00220"></a>00220     <span class="keyword">template</span> &lt;<span class="keyword">class</span> Set&gt;
<a name="l00221"></a>00221     <span class="keyword">struct </span>index_traits;
<a name="l00222"></a>00222 
<a name="l00223"></a>00223     <span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">class</span>, <span class="keyword">class</span>, <span class="keyword">class</span>&gt; <span class="keyword">class </span>S,
<a name="l00224"></a>00224               <span class="keyword">class </span>K, <span class="keyword">class </span>C, <span class="keyword">class </span>A&gt;
<a name="l00225"></a><a class="code" href="a00256.html">00225</a>     <span class="keyword">struct </span>index_traits&lt; S&lt;K, C, A&gt; &gt; {
<a name="l00226"></a><a class="code" href="a00256.html#cc7ba5ad1ad57ea451839c9ee8c15cdb">00226</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> S&lt;K, C, A&gt;::iterator             iter;
<a name="l00227"></a><a class="code" href="a00256.html#275aab573d1504fbe5399941227e3561">00227</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> S&lt;K, C, A&gt;::value_type           value;
<a name="l00228"></a><a class="code" href="a00256.html#b8c26d78a609c9f4927bdca976dedaad">00228</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00379.html">type_traits&lt;value&gt;::const_val</a>    const_elem;
<a name="l00229"></a><a class="code" href="a00256.html#f0a197616674322d67873d5c63723f5c">00229</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00379.html">type_traits&lt;value&gt;::const_ref</a>    const_ref;
<a name="l00230"></a><a class="code" href="a00256.html#cbe2d538ac589ee9e1f76c9ff1ec3e1a">00230</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00379.html">type_traits&lt;value&gt;::const_ptr</a>    const_ptr;
<a name="l00231"></a><a class="code" href="a00256.html#95a53be65f53a26a074302d59e92e0c2">00231</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> S&lt;K, C, A&gt;::key_compare          key_comp;
<a name="l00232"></a>00232     };
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="keyword">template</span> &lt;<span class="keyword">template</span> &lt;<span class="keyword">class</span>, <span class="keyword">class</span>&gt; <span class="keyword">class </span>Cont,
<a name="l00235"></a>00235               <span class="keyword">class </span><a class="code" href="a00355.html">Set</a>,
<a name="l00236"></a>00236               <span class="keyword">class </span>Comp = <a class="code" href="a00252.html">iless&lt;typename Set::iterator&gt;</a> &gt;
<a name="l00237"></a>00237     <span class="keyword">class </span>Index;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239     <span class="keyword">template</span> &lt;<span class="keyword">class</span> Set, <span class="keyword">class</span> Comp&gt;
<a name="l00240"></a><a class="code" href="a00255.html">00240</a>     <span class="keyword">class </span>Index&lt;std::set, <a class="code" href="a00355.html">Set</a>, Comp&gt; {
<a name="l00241"></a><a class="code" href="a00255.html#39594b343d64c938560112f77b833697">00241</a>       <span class="keyword">typedef</span> Index&lt;std::set, Set, Comp&gt;                <a class="code" href="a00255.html">This</a>;
<a name="l00242"></a><a class="code" href="a00255.html#92997742e4cf84bd9c5583b8488fd0c3">00242</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::iter          Iter;
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="a00255.html#86da8b9221e9754e9410ab9c036632ea">00244</a>       <span class="keyword">typedef</span> std::set&lt;Iter, Comp&gt;                      set_t;
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="a00255.html#33b1bed03318d745cde651f6de484cef">00246</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> set_t::const_iterator            c_iterator_;
<a name="l00247"></a><a class="code" href="a00255.html#d809253444fab4c71339c2ab48ddf6ac">00247</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::value         Value;
<a name="l00248"></a><a class="code" href="a00255.html#068fa7e14a73802d86d826a80a5e7230">00248</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_elem    Elem;
<a name="l00249"></a>00249     <span class="keyword">public</span>:
<a name="l00250"></a><a class="code" href="a00255.html#5ad1de1f9c4ef0cdafd4cf8efd35cbb2">00250</a>       <span class="keyword">typedef</span> Elem                                      value_type;
<a name="l00251"></a><a class="code" href="a00255.html#dd656c5ea6a67fec4dd78ae07f832e2d">00251</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ref     const_reference;
<a name="l00252"></a><a class="code" href="a00255.html#dfa0901b12b8eb6b56c0ff5b0b8fc52d">00252</a>       <span class="keyword">typedef</span> const_reference                           reference;
<a name="l00253"></a><a class="code" href="a00255.html#0cb29973d69993450889b933aaa2e3cb">00253</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ptr     const_pointer;
<a name="l00254"></a><a class="code" href="a00255.html#2a54c73a054c5c5da85eeb4ab1ff12a0">00254</a>       <span class="keyword">typedef</span> const_pointer                             pointer;
<a name="l00255"></a><a class="code" href="a00255.html#65703e92b563d2236d7d0c23602c24af">00255</a>       <span class="keyword">typedef</span> <a class="code" href="a00231.html">DerefIterator&lt;c_iterator_&gt;</a>                <a class="code" href="a00231.html">const_iterator</a>;
<a name="l00256"></a><a class="code" href="a00255.html#991e2055d668273de934ca514b06e4d6">00256</a>       <span class="keyword">typedef</span> <a class="code" href="a00231.html">const_iterator</a>                            <a class="code" href="a00231.html">iterator</a>;
<a name="l00257"></a>00257 
<a name="l00258"></a><a class="code" href="a00255.html#38b4854b5dd9bec72c9524f1c1c07242">00258</a>       <a class="code" href="a00231.html">const_iterator</a>    begin()<span class="keyword"> const </span>{
<a name="l00259"></a>00259         <span class="keywordflow">return</span> const_iterator::build(c_.begin());
<a name="l00260"></a>00260       }
<a name="l00261"></a><a class="code" href="a00255.html#20b87dce46728b420e49977325483a36">00261</a>       <a class="code" href="a00231.html">const_iterator</a>    end()<span class="keyword"> const </span>{
<a name="l00262"></a>00262         <span class="keywordflow">return</span> const_iterator::build(c_.end());
<a name="l00263"></a>00263       }
<a name="l00264"></a><a class="code" href="a00255.html#e0e393d037f7a41b9916e0b22cee2234">00264</a>       <a class="code" href="a00231.html">const_iterator</a>    find(<span class="keyword">const</span> Elem&amp; x)<span class="keyword"> const </span>{
<a name="l00265"></a>00265         <a class="code" href="a00355.html">Set</a>     tmp;
<a name="l00266"></a>00266         tmp.<a class="code" href="a00355.html#b5c1552975e742575dbd6d11b77611ec">insert</a>(x);
<a name="l00267"></a>00267         <span class="keywordflow">return</span> const_iterator::build(c_.find(tmp.<a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>()));
<a name="l00268"></a>00268       }
<a name="l00269"></a>00269 
<a name="l00270"></a><a class="code" href="a00255.html#53daf31a3413861b6802771557d88f0d">00270</a>       <span class="keyword">typename</span> set_t::size_type size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> c_.size(); }
<a name="l00271"></a>00271 
<a name="l00272"></a><a class="code" href="a00255.html#abb0601fb692f4ed106e9783407f1420">00272</a>       std::pair&lt;const_iterator, bool&gt;   insert(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00273"></a>00273         std::pair&lt;typename set_t::iterator, bool&gt;       p = c_.insert(x);
<a name="l00274"></a>00274         <span class="keywordflow">return</span> std::pair&lt;const_iterator, bool&gt;(const_iterator::build(p.first),
<a name="l00275"></a>00275                                                p.second);
<a name="l00276"></a>00276       }
<a name="l00277"></a>00277 
<a name="l00278"></a><a class="code" href="a00255.html#37916573eeb8c835106a05cbf9afe673">00278</a>       <span class="keywordtype">void</span>              erase(<a class="code" href="a00231.html">const_iterator</a> pos) {
<a name="l00279"></a>00279         c_.erase(pos);
<a name="l00280"></a>00280       }
<a name="l00281"></a>00281 
<a name="l00282"></a><a class="code" href="a00255.html#dac0fcdd83d3270ac0742767a0512b7f">00282</a>       <span class="keywordtype">void</span>              erase(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00283"></a>00283         c_.erase(x);
<a name="l00284"></a>00284       }
<a name="l00285"></a>00285     <span class="keyword">private</span>:
<a name="l00286"></a><a class="code" href="a00255.html#104f4ecd4de9932305399ad2e8f83676">00286</a>       set_t     c_;
<a name="l00287"></a>00287     };
<a name="l00288"></a>00288 
<a name="l00289"></a>00289     <span class="keyword">template</span> &lt;<span class="keyword">class</span> Set, <span class="keyword">class</span> Comp&gt;
<a name="l00290"></a><a class="code" href="a00254.html">00290</a>     <span class="keyword">class </span>Index&lt;std::multiset, <a class="code" href="a00355.html">Set</a>, Comp&gt; {
<a name="l00291"></a><a class="code" href="a00254.html#ace6a89c8a33249772c7b1ee0cfb8dbc">00291</a>       <span class="keyword">typedef</span> Index&lt;std::multiset, Set, Comp&gt;           <a class="code" href="a00254.html">This</a>;
<a name="l00292"></a><a class="code" href="a00254.html#52d83d4b4bed87627eb9a1d8e27aa460">00292</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::iter          Iter;
<a name="l00293"></a>00293 
<a name="l00294"></a><a class="code" href="a00254.html#100dabf19902af19b417df4792faf1c3">00294</a>       <span class="keyword">typedef</span> std::multiset&lt;Iter, Comp&gt;                 set_t;
<a name="l00295"></a>00295 
<a name="l00296"></a><a class="code" href="a00254.html#3d84fa230add981460e992b31cf58393">00296</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> set_t::const_iterator            c_iterator_;
<a name="l00297"></a><a class="code" href="a00254.html#35e8d1257a7efbb189318ff56ba40d16">00297</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::value         Value;
<a name="l00298"></a><a class="code" href="a00254.html#cf9e157d8821e52a9b341c35d7ccbdd4">00298</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_elem    Elem;
<a name="l00299"></a><a class="code" href="a00254.html#e21dabf901423e16765297c60643e09e">00299</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::key_compare                 comp_t;
<a name="l00300"></a>00300     <span class="keyword">public</span>:
<a name="l00301"></a><a class="code" href="a00254.html#d5c28999e3502ebdc613baf8a1526e18">00301</a>       <span class="keyword">typedef</span> Elem                                      value_type;
<a name="l00302"></a><a class="code" href="a00254.html#001d47517d16e8b6730634247bc44161">00302</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ref     const_reference;
<a name="l00303"></a><a class="code" href="a00254.html#bd2f5cb517f1f6e6f4bdca7a00114ff5">00303</a>       <span class="keyword">typedef</span> const_reference                           reference;
<a name="l00304"></a><a class="code" href="a00254.html#7d83d473d8371f6337c4bb30197f7bf6">00304</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> index_traits&lt;Set&gt;::const_ptr     const_pointer;
<a name="l00305"></a><a class="code" href="a00254.html#cfc5379c7797607e5f3b31459db4d2c9">00305</a>       <span class="keyword">typedef</span> const_pointer                             pointer;
<a name="l00306"></a><a class="code" href="a00254.html#2550d57b61b40a1ebf2a58886d21f0d1">00306</a>       <span class="keyword">typedef</span> <a class="code" href="a00231.html">DerefIterator&lt;c_iterator_&gt;</a>                <a class="code" href="a00231.html">const_iterator</a>;
<a name="l00307"></a><a class="code" href="a00254.html#0b57679893d41005135cd03800d6c618">00307</a>       <span class="keyword">typedef</span> <a class="code" href="a00231.html">const_iterator</a>                            <a class="code" href="a00231.html">iterator</a>;
<a name="l00308"></a>00308 
<a name="l00309"></a><a class="code" href="a00254.html#3685698266bed6d9ca9544fe86d024ea">00309</a>       Index(<span class="keyword">const</span> <span class="keyword">typename</span> Set::key_compare&amp; kc = comp_t())
<a name="l00310"></a>00310         : kc_(kc) {}
<a name="l00311"></a>00311 
<a name="l00312"></a><a class="code" href="a00254.html#73f69475af9ec98188ad61e2753a2b2b">00312</a>       <a class="code" href="a00231.html">const_iterator</a>    begin()<span class="keyword"> const </span>{
<a name="l00313"></a>00313         <span class="keywordflow">return</span> const_iterator::build(c_.begin());
<a name="l00314"></a>00314       }
<a name="l00315"></a><a class="code" href="a00254.html#c92ddafed5a0ed4598e0a6ffe517e781">00315</a>       <a class="code" href="a00231.html">const_iterator</a>    end()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> const_iterator::build(c_.end()); }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317       std::pair&lt;const_iterator, const_iterator&gt;
<a name="l00318"></a><a class="code" href="a00254.html#dbc6f1df462d8129973450ecd4e39245">00318</a>       equal_range(<span class="keyword">const</span> Elem&amp; x)<span class="keyword"> const </span>{
<a name="l00319"></a>00319         <a class="code" href="a00355.html">Set</a>     tmp;
<a name="l00320"></a>00320         tmp.<a class="code" href="a00355.html#b5c1552975e742575dbd6d11b77611ec">insert</a>(x);
<a name="l00321"></a>00321         std::pair&lt;c_iterator_, c_iterator_&gt;     er =
<a name="l00322"></a>00322           c_.equal_range(tmp.<a class="code" href="a00355.html#4d8cf3d1a001b69c5ba57e09d0b22f86">begin</a>());
<a name="l00323"></a>00323         <span class="keywordflow">return</span> std::pair&lt;<a class="code" href="a00231.html">const_iterator</a>,
<a name="l00324"></a>00324                          const_iterator&gt;(const_iterator::build(er.first),
<a name="l00325"></a>00325                                          const_iterator::build(er.second));
<a name="l00326"></a>00326       }
<a name="l00327"></a>00327 
<a name="l00328"></a><a class="code" href="a00254.html#b149552212c510d44f06574b2bf41713">00328</a>       <span class="keyword">typename</span> set_t::size_type size()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> c_.size(); }
<a name="l00329"></a>00329 
<a name="l00330"></a><a class="code" href="a00254.html#6f56f1f5277c1397085e152f6522c768">00330</a>       <a class="code" href="a00231.html">const_iterator</a>    insert(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00331"></a>00331         <span class="keywordflow">return</span> const_iterator::build(c_.insert(x));
<a name="l00332"></a>00332       }
<a name="l00333"></a>00333 
<a name="l00334"></a><a class="code" href="a00254.html#736db5306f374fe44123b41677a961d0">00334</a>       <span class="keywordtype">void</span>              erase(<a class="code" href="a00231.html">const_iterator</a> pos) {
<a name="l00335"></a>00335         c_.erase(pos);
<a name="l00336"></a>00336       }
<a name="l00337"></a>00337 
<a name="l00338"></a><a class="code" href="a00254.html#3169d9021aa4e40f4345e8000ae822c3">00338</a>       <span class="keywordtype">void</span>              erase(<span class="keyword">const</span> Iter&amp; x) {
<a name="l00339"></a>00339         std::pair&lt;<span class="keyword">typename</span> set_t::iterator,
<a name="l00340"></a>00340                   <span class="keyword">typename</span> set_t::iterator&gt;     set_er = c_.equal_range(x);
<a name="l00341"></a>00341         std::pair&lt;iterator, iterator&gt;   er =
<a name="l00342"></a>00342           std::pair&lt;iterator, iterator&gt;(iterator::build(set_er.first),
<a name="l00343"></a>00343                                         iterator::build(set_er.second));
<a name="l00344"></a>00344         <span class="keywordflow">for</span> (<a class="code" href="a00231.html">iterator</a> i = er.first; i != er.second; <span class="comment">/* ++i elsewhere */</span>)
<a name="l00345"></a>00345           <span class="keywordflow">if</span> (!kc_(*i, *x) &amp;&amp; !kc_(*x, *i)) {
<a name="l00346"></a>00346             <a class="code" href="a00231.html">iterator</a>    tmp = i++;
<a name="l00347"></a>00347             erase(tmp);
<a name="l00348"></a>00348           } <span class="keywordflow">else</span>
<a name="l00349"></a>00349             ++i;
<a name="l00350"></a>00350       }
<a name="l00351"></a>00351     <span class="keyword">private</span>:
<a name="l00352"></a><a class="code" href="a00254.html#7b9b980c21ac452130024fbf88660793">00352</a>       <span class="keyword">const</span> <span class="keyword">typename</span> Set::key_compare   kc_;
<a name="l00353"></a><a class="code" href="a00254.html#10e5551f2bbb238dba2cc2959910b2ad">00353</a>       set_t             c_;
<a name="l00354"></a>00354     };
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00355.html">Set</a>,
<a name="l00357"></a>00357               <span class="keywordtype">unsigned</span> Dim,
<a name="l00358"></a>00358               <span class="keyword">class </span>Key,
<a name="l00359"></a>00359               <span class="keyword">class </span>Comp = <a class="code" href="a00253.html">imultistampable_less&lt;Key, typename Set::iterator&gt;</a> &gt;
<a name="l00360"></a><a class="code" href="a00291.html">00360</a>     <span class="keyword">class </span><a class="code" href="a00291.html">MSIndex</a> {
<a name="l00361"></a><a class="code" href="a00291.html#e934d7abba84f7f736687bf9ecbc9c0b">00361</a>       <span class="keyword">typedef</span> <a class="code" href="a00291.html">MSIndex&lt;Set, Dim, Key, Comp&gt;</a>              <a class="code" href="a00291.html">This</a>;
<a name="l00362"></a><a class="code" href="a00291.html#05e30299570e882bb8435799705c7319">00362</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">Set::iterator</a>                    <a class="code" href="a00291.html#05e30299570e882bb8435799705c7319">Iter</a>;
<a name="l00363"></a><a class="code" href="a00291.html#08c5e75d3233f16aecbb43dacaa1a8d4">00363</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::key_compare                 <a class="code" href="a00291.html#08c5e75d3233f16aecbb43dacaa1a8d4">IterComp</a>;
<a name="l00364"></a><a class="code" href="a00291.html#56dbd0bc2c090d8c5588aa75678fd1ee">00364</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type                  <a class="code" href="a00291.html#56dbd0bc2c090d8c5588aa75678fd1ee">Value</a>;
<a name="l00365"></a><a class="code" href="a00291.html#5d13f63e590c502485465d1f1d02d5ae">00365</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="a00379.html">type_traits&lt;Value&gt;::const_val</a>    <a class="code" href="a00291.html#5d13f63e590c502485465d1f1d02d5ae">CElem</a>;
<a name="l00366"></a><a class="code" href="a00291.html#0df709188e495de0c7a7313104f68fb1">00366</a>       <span class="keyword">typedef</span> std::multiset&lt;Iter, Comp&gt;                 <a class="code" href="a00291.html#0df709188e495de0c7a7313104f68fb1">set_t</a>;
<a name="l00367"></a><a class="code" href="a00291.html#5260b9bea8d9f80594cc0fc8f0c55d4f">00367</a>       <span class="keyword">typedef</span> std::map&lt;Key, set_t&gt;                      <a class="code" href="a00291.html#5260b9bea8d9f80594cc0fc8f0c55d4f">setmap_t</a>;
<a name="l00368"></a><a class="code" href="a00291.html#86e46a07829479f27d1913ae846a1790">00368</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> set_t::const_iterator            <a class="code" href="a00291.html#86e46a07829479f27d1913ae846a1790">c_iterator_</a>;
<a name="l00369"></a><a class="code" href="a00291.html#89de21628db4fec6352ffd73f7e6054d">00369</a>       <span class="keyword">typedef</span> <a class="code" href="a00231.html">DerefIterator&lt;c_iterator_&gt;</a>                <a class="code" href="a00231.html">d_iterator_</a>;
<a name="l00370"></a>00370     <span class="keyword">public</span>:
<a name="l00371"></a><a class="code" href="a00291.html#cb5221c065b7e1c92d89f3744b1d7510">00371</a>       <span class="keyword">typedef</span> Key                                       <a class="code" href="a00291.html#cb5221c065b7e1c92d89f3744b1d7510">key_type</a>;
<a name="l00372"></a><a class="code" href="a00291.html#6b9a63147102aea9f049aa2c0bdb47a4">00372</a>       <span class="keyword">typedef</span> <a class="code" href="a00291.html#05e30299570e882bb8435799705c7319">Iter</a>                                      <a class="code" href="a00291.html#6b9a63147102aea9f049aa2c0bdb47a4">value_type</a>;
<a name="l00373"></a><a class="code" href="a00291.html#7dfad9c4025fa1f59cb1c32bace5f2dd">00373</a>       <span class="keyword">typedef</span> <a class="code" href="a00271.html">KeyedIterator&lt;Key, d_iterator_&gt;</a>           <a class="code" href="a00271.html">const_iterator</a>;
<a name="l00374"></a><a class="code" href="a00291.html#602c90e96cff282348b8d538096b5206">00374</a>       <span class="keyword">typedef</span> <a class="code" href="a00271.html">const_iterator</a>                            <a class="code" href="a00271.html">iterator</a>;
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="a00291.html#987e6afcca2b27c61b642b3c5d18ad33">00376</a>       <a class="code" href="a00291.html#987e6afcca2b27c61b642b3c5d18ad33">MSIndex</a>(<span class="keyword">const</span> <a class="code" href="a00355.html">Set</a>&amp; s)
<a name="l00377"></a>00377         : <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>(),
<a name="l00378"></a>00378           <a class="code" href="a00291.html#80c9896287a488aad9bc915c95a0b509">c_</a>(s.key_comp()),
<a name="l00379"></a>00379           <a class="code" href="a00291.html#142f4095290ff703156c84b96d0d8ab4">s_</a>(s)
<a name="l00380"></a>00380       {}
<a name="l00381"></a>00381 
<a name="l00382"></a><a class="code" href="a00291.html#e7339e8d92cf146a82fa21490842b81f">00382</a>       <a class="code" href="a00271.html">iterator</a>  <a class="code" href="a00291.html#e7339e8d92cf146a82fa21490842b81f">begin</a>(<span class="keyword">const</span> Key&amp; k)<span class="keyword"> const </span>{
<a name="l00383"></a>00383         <span class="keyword">typename</span> setmap_t::const_iterator       x = <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.find(k);
<a name="l00384"></a>00384         assert(x != <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.end());
<a name="l00385"></a>00385         <span class="keywordflow">return</span> <a class="code" href="a00291.html#602c90e96cff282348b8d538096b5206">iterator</a>(<a class="code" href="a00231.html#3fad860d646fb134eec810e121c052ab">d_iterator_::build</a>(x-&gt;second.begin()), k);
<a name="l00386"></a>00386       }
<a name="l00387"></a>00387 
<a name="l00388"></a><a class="code" href="a00291.html#bb770fb64613edcbe138520188bb81fd">00388</a>       <a class="code" href="a00271.html">iterator</a>  <a class="code" href="a00291.html#bb770fb64613edcbe138520188bb81fd">end</a>(<span class="keyword">const</span> Key&amp; k)<span class="keyword"> const </span>{
<a name="l00389"></a>00389         <span class="keyword">typename</span> setmap_t::const_iterator       x = <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.find(k);
<a name="l00390"></a>00390         assert(x != <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.end());
<a name="l00391"></a>00391         <span class="keywordflow">return</span> <a class="code" href="a00291.html#602c90e96cff282348b8d538096b5206">iterator</a>(<a class="code" href="a00231.html#3fad860d646fb134eec810e121c052ab">d_iterator_::build</a>(x-&gt;second.end()), k);
<a name="l00392"></a>00392       }
<a name="l00393"></a>00393 
<a name="l00394"></a><a class="code" href="a00291.html#5275080f1cf3b7e6107b3abb20710613">00394</a>       <a class="code" href="a00271.html">iterator</a>  <a class="code" href="a00291.html#5275080f1cf3b7e6107b3abb20710613">find</a>(<span class="keyword">const</span> Key&amp; k, <span class="keyword">const</span> <a class="code" href="a00291.html#05e30299570e882bb8435799705c7319">Iter</a>&amp; x)<span class="keyword"> const </span>{
<a name="l00395"></a>00395         <span class="keyword">typename</span> setmap_t::const_iterator       pos = <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.find(k);
<a name="l00396"></a>00396         assert(pos != <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.end());
<a name="l00397"></a>00397         <span class="keywordflow">return</span> <a class="code" href="a00291.html#602c90e96cff282348b8d538096b5206">iterator</a>(<a class="code" href="a00231.html#3fad860d646fb134eec810e121c052ab">d_iterator_::build</a>(pos-&gt;second.find(x)), k);
<a name="l00398"></a>00398       }
<a name="l00399"></a>00399 
<a name="l00400"></a><a class="code" href="a00291.html#759c1674ceff928773a51021f5b07ca6">00400</a>       <span class="keywordtype">void</span>      <a class="code" href="a00291.html#759c1674ceff928773a51021f5b07ca6">insert</a>(<span class="keyword">const</span> <a class="code" href="a00291.html#05e30299570e882bb8435799705c7319">Iter</a>&amp; x) {
<a name="l00401"></a>00401         <span class="keywordflow">for</span> (<span class="keyword">typename</span> setmap_t::iterator i = <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.begin(); i != <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.end(); ++i)
<a name="l00402"></a>00402           i-&gt;second.insert(x);
<a name="l00403"></a>00403       }
<a name="l00404"></a>00404 
<a name="l00405"></a><a class="code" href="a00291.html#4433deb6e4b9478bd0108c4a2cf97cb2">00405</a>       <span class="keywordtype">void</span>      <a class="code" href="a00291.html#4433deb6e4b9478bd0108c4a2cf97cb2">erase</a>(<span class="keyword">const</span> <a class="code" href="a00291.html#05e30299570e882bb8435799705c7319">Iter</a>&amp; x) {
<a name="l00406"></a>00406         <span class="keywordflow">for</span> (<span class="keyword">typename</span> setmap_t::iterator i = <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.begin(); i != <a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">m_</a>.end(); ++i) {
<a name="l00407"></a>00407           std::pair&lt;typename set_t::iterator, typename set_t::iterator&gt; p =
<a name="l00408"></a>00408             i-&gt;second.equal_range(x);
<a name="l00409"></a>00409           <span class="keywordflow">for</span> (<span class="keyword">typename</span> set_t::iterator j = p.first;
<a name="l00410"></a>00410                j != p.second; <span class="comment">/* ++j elsewhere */</span>)
<a name="l00411"></a>00411             <span class="keywordflow">if</span> (!<a class="code" href="a00291.html#80c9896287a488aad9bc915c95a0b509">c_</a>(*x, **j) &amp;&amp; !<a class="code" href="a00291.html#80c9896287a488aad9bc915c95a0b509">c_</a>(**j, *x)) {
<a name="l00412"></a>00412               <span class="keyword">typename</span> set_t::iterator  tmp = j++;
<a name="l00413"></a>00413               i-&gt;second.erase(tmp);
<a name="l00414"></a>00414             } <span class="keywordflow">else</span>
<a name="l00415"></a>00415               ++j;
<a name="l00416"></a>00416         }
<a name="l00417"></a>00417       }
<a name="l00418"></a>00418 
<a name="l00419"></a><a class="code" href="a00291.html#8aa3e96c12a896f0fa418643dc3341c9">00419</a>       <span class="keywordtype">void</span>      set_stamp(<a class="code" href="a00271.html">const_iterator</a> pos,
<a name="l00420"></a>00420                           <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>&amp; now = <a class="code" href="a00373.html#98957e30d299b066200dcc8f14bd8b43">TimeVal::now</a>()) {
<a name="l00421"></a>00421         <span class="keyword">typename</span> setmap_t::iterator     x = m_.find(pos.<a class="code" href="a00271.html#e6bf5bdb6281a2b9c5ea69786da083f6">key</a>());
<a name="l00422"></a>00422         <span class="comment">// This check is important to avoid looping of MaskIterator.</span>
<a name="l00423"></a>00423         <span class="keywordflow">if</span> (stamp(pos) == now)
<a name="l00424"></a>00424           <span class="keywordflow">return</span>;
<a name="l00425"></a>00425         Iter    tmp = *static_cast&lt;c_iterator_&amp;&gt;(pos);
<a name="l00426"></a>00426         x-&gt;second.erase(pos);
<a name="l00427"></a>00427         const_cast&lt;Value&amp;&gt;(*tmp).set_stamp(Dim, pos.<a class="code" href="a00271.html#e6bf5bdb6281a2b9c5ea69786da083f6">key</a>(), now);
<a name="l00428"></a>00428         x-&gt;second.insert(tmp);
<a name="l00429"></a>00429       }
<a name="l00430"></a>00430 
<a name="l00431"></a><a class="code" href="a00291.html#ca4ed0d44657ecb6d3b1bf21774cbdf2">00431</a>       <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>     stamp(<a class="code" href="a00271.html">const_iterator</a> pos)<span class="keyword"> const </span>{
<a name="l00432"></a>00432         <span class="keywordflow">return</span> (*static_cast&lt;c_iterator_&amp;&gt;(pos))-&gt;stamp(Dim, pos.key());
<a name="l00433"></a>00433       }
<a name="l00434"></a>00434 
<a name="l00435"></a><a class="code" href="a00291.html#9e028b7adc52a55ec221251179e02a4b">00435</a>       <span class="keywordtype">bool</span>      expired(<a class="code" href="a00271.html">const_iterator</a> pos,
<a name="l00436"></a>00436                         <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>&amp; period,
<a name="l00437"></a>00437                         <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>&amp; now = <a class="code" href="a00373.html#98957e30d299b066200dcc8f14bd8b43">TimeVal::now</a>())<span class="keyword"> const </span>{
<a name="l00438"></a>00438         <span class="keywordflow">return</span> (pos)-&gt;expired(Dim, pos.<a class="code" href="a00271.html#e6bf5bdb6281a2b9c5ea69786da083f6">key</a>(), period, now);
<a name="l00439"></a>00439       }
<a name="l00440"></a>00440 
<a name="l00441"></a><a class="code" href="a00291.html#fb63043ec89e70fd2941d8347b3a2cd3">00441</a>       <span class="keywordtype">void</span>      add_key(<span class="keyword">const</span> Key&amp; k) {
<a name="l00442"></a>00442         assert(m_.find(k) == m_.end());
<a name="l00443"></a>00443         <span class="keyword">typename</span> setmap_t::value_type   new_entry(k, set_t(Comp(Dim, k)));
<a name="l00444"></a>00444         <span class="keywordflow">for</span> (<span class="keyword">typename</span> <a class="code" href="a00355.html#727abaff5e86a277f8a947649d17a775">Set::iterator</a> i = s_.begin(); i != s_.end(); ++i)
<a name="l00445"></a>00445           new_entry.second.insert(i);
<a name="l00446"></a>00446         m_.insert(new_entry);
<a name="l00447"></a>00447 
<a name="l00448"></a>00448       }
<a name="l00449"></a>00449 
<a name="l00450"></a><a class="code" href="a00291.html#503f5955d057a6aa7e1d9857e76b3d6f">00450</a>       <span class="keywordtype">void</span>      remove_key(<span class="keyword">const</span> Key&amp; k) {
<a name="l00451"></a>00451         <span class="keyword">typename</span> setmap_t::iterator     x = m_.find(k);
<a name="l00452"></a>00452         assert(x != m_.end());
<a name="l00453"></a>00453         <span class="keywordflow">for</span> (<span class="keyword">typename</span> set_t::iterator i = x-&gt;second.begin();
<a name="l00454"></a>00454              i != x-&gt;second.end(); ++i)
<a name="l00455"></a>00455           const_cast&lt;Value&amp;&gt;(**i).remove_stamp(Dim, k);
<a name="l00456"></a>00456         m_.erase(x);
<a name="l00457"></a>00457       }
<a name="l00458"></a>00458     <span class="keyword">private</span>:
<a name="l00459"></a><a class="code" href="a00291.html#9ad9c6c7b3ec816fde00d5c22205a154">00459</a>       setmap_t          m_;
<a name="l00460"></a><a class="code" href="a00291.html#80c9896287a488aad9bc915c95a0b509">00460</a>       <span class="keyword">const</span> IterComp&amp;   c_;
<a name="l00461"></a><a class="code" href="a00291.html#142f4095290ff703156c84b96d0d8ab4">00461</a>       <span class="keyword">const</span> <a class="code" href="a00355.html">Set</a>&amp;        s_;
<a name="l00462"></a>00462     };
<a name="l00463"></a>00463 
<a name="l00464"></a>00464     <span class="keyword">template</span> &lt;<span class="keyword">class</span>&gt; <span class="keyword">struct </span>MSAdapt;
<a name="l00465"></a>00465 
<a name="l00466"></a>00466     <span class="keyword">template</span> &lt;<span class="keyword">class</span>&gt; <span class="keyword">struct </span>MultiAdapt;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00355.html">Set</a>,
<a name="l00469"></a>00469               <span class="keyword">class </span>Action = <a class="code" href="a00327.html">NoAction&lt;Set&gt;</a>,
<a name="l00470"></a>00470               <span class="keyword">class </span>Predicate = <a class="code" href="a00229.html">DefaultPredicate&lt;Set&gt;</a>,
<a name="l00471"></a>00471               <span class="keyword">class </span>ActionSet = <a class="code" href="a00355.html">Set</a>&gt;
<a name="l00472"></a><a class="code" href="a00365.html">00472</a>     <span class="keyword">class </span><a class="code" href="a00365.html">Subset</a> {
<a name="l00473"></a><a class="code" href="a00365.html#d433ec54cad9c84ca884ab4217cf7a14">00473</a>       <span class="keyword">typedef</span> <a class="code" href="a00365.html">Subset&lt;Set, Action, Predicate, ActionSet&gt;</a>         <a class="code" href="a00365.html">This</a>;
<a name="l00474"></a><a class="code" href="a00365.html#c22b9ef25e3e66177f33869d9fb288b2">00474</a>       <span class="keyword">typedef</span> <a class="code" href="a00279.html">MaskIterator&lt;Set, Action, Predicate, ActionSet&gt;</a>   <a class="code" href="a00279.html">e_iterator_</a>;
<a name="l00475"></a><a class="code" href="a00365.html#cd9d55de054b7759cf476c08aa5aff83">00475</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">DeconstIterator&lt;e_iterator_&gt;</a>                      <a class="code" href="a00228.html">m_iterator_</a>;
<a name="l00476"></a>00476     <span class="keyword">public</span>:
<a name="l00477"></a><a class="code" href="a00365.html#f67b99656f09f1dc360ceca6ef22e860">00477</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::iterator    set_iterator;
<a name="l00478"></a><a class="code" href="a00365.html#b053959112b7f99c54f7d288c7b05519">00478</a>       <span class="keyword">typedef</span> <a class="code" href="a00279.html">e_iterator_</a>               <a class="code" href="a00279.html">mask_iterator</a>;
<a name="l00479"></a><a class="code" href="a00365.html#40f5b8a4de781e017b92b78fc093b1c9">00479</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type  value_type;
<a name="l00480"></a><a class="code" href="a00365.html#942844e66fd6efb08172c7ee999e6b2e">00480</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">m_iterator_</a>               <a class="code" href="a00228.html">iterator</a>;
<a name="l00481"></a><a class="code" href="a00365.html#d9f541df80538fa142f8800018dd4284">00481</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">iterator</a>                  <a class="code" href="a00228.html">const_iterator</a>;
<a name="l00482"></a>00482 
<a name="l00483"></a><a class="code" href="a00365.html#b9e7990fa3e3a1bf008db28a4bbd5c13">00483</a>       <a class="code" href="a00365.html">Subset</a>(<a class="code" href="a00355.html">Set</a>&amp; s)
<a name="l00484"></a>00484         : actionset_(s),
<a name="l00485"></a>00485           set_(s)
<a name="l00486"></a>00486       {}
<a name="l00487"></a>00487 
<a name="l00488"></a><a class="code" href="a00365.html#db67e794cfc1c6a863b2f551e03dff0f">00488</a>       <a class="code" href="a00365.html">Subset</a>(ActionSet&amp; as, <a class="code" href="a00355.html">Set</a>&amp; s)
<a name="l00489"></a>00489         : actionset_(as),
<a name="l00490"></a>00490           set_(s)
<a name="l00491"></a>00491       {}
<a name="l00492"></a>00492 
<a name="l00493"></a><a class="code" href="a00365.html#2157b4bc62732f03cff17a3144754f2c">00493</a>       <a class="code" href="a00228.html">iterator</a>  begin() {
<a name="l00494"></a>00494         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(set_.begin(),
<a name="l00495"></a>00495                                               set_, actionset_).skip());
<a name="l00496"></a>00496       }
<a name="l00497"></a>00497 
<a name="l00498"></a><a class="code" href="a00365.html#57976c4440f12e1a232b963db1c0c458">00498</a>       <a class="code" href="a00228.html">iterator</a>  end() {
<a name="l00499"></a>00499         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(set_.end(),
<a name="l00500"></a>00500                                               set_, actionset_));
<a name="l00501"></a>00501       }
<a name="l00502"></a>00502 
<a name="l00503"></a><a class="code" href="a00365.html#c83ba0471096df5804d635b31ae3fbcd">00503</a>       <a class="code" href="a00228.html">iterator</a>  find(<span class="keyword">const</span> <span class="keyword">typename</span> Set::value_type&amp; x) {
<a name="l00504"></a>00504         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(set_.find(x),
<a name="l00505"></a>00505                                               set_, actionset_).check());
<a name="l00506"></a>00506       }
<a name="l00507"></a>00507 
<a name="l00508"></a><a class="code" href="a00365.html#d993f379bfa7c8b95c086d94171ddbe4">00508</a>       <span class="keywordtype">void</span>      cleanup() {
<a name="l00509"></a>00509         <span class="keywordflow">for</span> (<a class="code" href="a00228.html">iterator</a> i = begin(); i != end(); ++i);
<a name="l00510"></a>00510       }
<a name="l00511"></a>00511 
<a name="l00512"></a>00512     <span class="keyword">private</span>:
<a name="l00513"></a><a class="code" href="a00365.html#ef9a4f3336412c7d380e0fd124541254">00513</a>       ActionSet&amp;        actionset_;
<a name="l00514"></a><a class="code" href="a00365.html#f837655cecd1c5caa47e387676cf4984">00514</a>       <a class="code" href="a00355.html">Set</a>&amp;              set_;
<a name="l00515"></a>00515     };
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <span class="keyword">template</span> &lt;<span class="keyword">class </span><a class="code" href="a00355.html">Set</a>,
<a name="l00518"></a>00518               <span class="keyword">class </span>Action,
<a name="l00519"></a>00519               <span class="keyword">class </span>Predicate,
<a name="l00520"></a>00520               <span class="keyword">class </span>ActionSet&gt;
<a name="l00521"></a><a class="code" href="a00367.html">00521</a>     <span class="keyword">class </span><a class="code" href="a00365.html">Subset</a>&lt;MultiAdapt&lt;Set&gt;, Action, Predicate, ActionSet&gt; {
<a name="l00522"></a><a class="code" href="a00367.html#3a93eaa14a15d81d91e229422f652784">00522</a>       <span class="keyword">typedef</span> <a class="code" href="a00365.html">Subset&lt;MultiAdapt&lt;Set&gt;</a>, Action, Predicate, ActionSet&gt;     <a class="code" href="a00367.html">This</a>;
<a name="l00523"></a><a class="code" href="a00367.html#b1513b961414ef72edc7f8bc3457153d">00523</a>       <span class="keyword">typedef</span> <a class="code" href="a00279.html">MaskIterator&lt;Set, Action, Predicate, ActionSet&gt;</a>   <a class="code" href="a00279.html">e_iterator_</a>;
<a name="l00524"></a><a class="code" href="a00367.html#b65f36f957d24ebacc2367c631bfd043">00524</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">DeconstIterator&lt;e_iterator_&gt;</a>                      <a class="code" href="a00228.html">m_iterator_</a>;
<a name="l00525"></a>00525     <span class="keyword">public</span>:
<a name="l00526"></a><a class="code" href="a00367.html#3cd8dece4dccd3516dc1563568b971cf">00526</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::iterator    set_iterator;
<a name="l00527"></a><a class="code" href="a00367.html#059dbc7dbd9cfdf0cb00c5e1a93c3d63">00527</a>       <span class="keyword">typedef</span> <a class="code" href="a00279.html">e_iterator_</a>               <a class="code" href="a00279.html">mask_iterator</a>;
<a name="l00528"></a><a class="code" href="a00367.html#7cd1efa25044ef42c072fb4d4e5dc8f1">00528</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type  value_type;
<a name="l00529"></a><a class="code" href="a00367.html#c050e3f8fd3120b9be36589b1715e8ea">00529</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">m_iterator_</a>               <a class="code" href="a00228.html">iterator</a>;
<a name="l00530"></a><a class="code" href="a00367.html#978977ce93860be089e722d37cce1f2e">00530</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">iterator</a>                  <a class="code" href="a00228.html">const_iterator</a>;
<a name="l00531"></a>00531 
<a name="l00532"></a><a class="code" href="a00367.html#a6ed1e60eda1010cb38a10683e0d02e1">00532</a>       <a class="code" href="a00365.html">Subset</a>(Set&amp; s)
<a name="l00533"></a>00533         : actionset_(s),
<a name="l00534"></a>00534           set_(s)
<a name="l00535"></a>00535       {}
<a name="l00536"></a>00536 
<a name="l00537"></a><a class="code" href="a00367.html#6112a185cffba76c458ac833a5c775dc">00537</a>       <a class="code" href="a00365.html">Subset</a>(ActionSet&amp; as, Set&amp; s)
<a name="l00538"></a>00538         : actionset_(as),
<a name="l00539"></a>00539           set_(s)
<a name="l00540"></a>00540       {}
<a name="l00541"></a>00541 
<a name="l00542"></a><a class="code" href="a00367.html#9ac464f0eaaa47edf530adce4661bf57">00542</a>       <a class="code" href="a00228.html">iterator</a>  begin() {
<a name="l00543"></a>00543         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(set_.begin(),
<a name="l00544"></a>00544                                               set_, actionset_).skip());
<a name="l00545"></a>00545       }
<a name="l00546"></a>00546 
<a name="l00547"></a><a class="code" href="a00367.html#0520bd635794236e5d182c479838e1ce">00547</a>       <a class="code" href="a00228.html">iterator</a>  end() {
<a name="l00548"></a>00548         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(set_.end(),
<a name="l00549"></a>00549                                               set_, actionset_));
<a name="l00550"></a>00550       }
<a name="l00551"></a>00551 
<a name="l00552"></a>00552       std::pair&lt;iterator, iterator&gt;
<a name="l00553"></a><a class="code" href="a00367.html#72c9efed97270766cafff0111ef7185b">00553</a>       equal_range(<span class="keyword">const</span> <span class="keyword">typename</span> Set::value_type&amp; x) {
<a name="l00554"></a>00554         std::pair&lt;set_iterator, set_iterator&gt;   p = set_.equal_range(x);
<a name="l00555"></a>00555         <span class="keywordflow">return</span> std::pair&lt;iterator, iterator&gt;(m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(p.first, set_, actionset_).skip()),
<a name="l00556"></a>00556                                              m_iterator_::build(<a class="code" href="a00279.html">e_iterator_</a>(p.second, set_, actionset_).skip()));
<a name="l00557"></a>00557       }
<a name="l00558"></a>00558     <span class="keyword">private</span>:
<a name="l00559"></a><a class="code" href="a00367.html#dd5c5238d8c3b8d35525eb9c5b79d6de">00559</a>       ActionSet&amp;        actionset_;
<a name="l00560"></a><a class="code" href="a00367.html#4a8c59321c24247fb63e75f0e49e34b9">00560</a>       Set&amp;              set_;
<a name="l00561"></a>00561     };
<a name="l00562"></a>00562 
<a name="l00563"></a>00563     <span class="keyword">template</span> &lt;<span class="keyword">class </span>Set,
<a name="l00564"></a>00564               <span class="keyword">class </span>Action, <span class="keyword">class </span>Predicate, <span class="keyword">class </span>ActionSet&gt;
<a name="l00565"></a><a class="code" href="a00366.html">00565</a>     <span class="keyword">class </span><a class="code" href="a00365.html">Subset</a>&lt;MSAdapt&lt;Set&gt;, Action, Predicate, ActionSet&gt; {
<a name="l00566"></a><a class="code" href="a00366.html#d2441bbc4c9303aa2477a19fd0bb525a">00566</a>       <span class="keyword">typedef</span> <a class="code" href="a00365.html">Subset&lt;MSAdapt&lt;Set&gt;</a>, Action, Predicate, ActionSet&gt;        <a class="code" href="a00366.html">This</a>;
<a name="l00567"></a><a class="code" href="a00366.html#eec6e6782ca09c809df4039ae52d0fc7">00567</a>       <span class="keyword">typedef</span> <a class="code" href="a00279.html">MaskIterator&lt;MSAdapt&lt;Set&gt;</a>, Action, Predicate, ActionSet&gt;  <a class="code" href="a00280.html">e_iterator_</a>;
<a name="l00568"></a><a class="code" href="a00366.html#64d22a6a6bb418fdcedb025c09650594">00568</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">DeconstIterator&lt;e_iterator_&gt;</a>                      <a class="code" href="a00228.html">m_iterator_</a>;
<a name="l00569"></a>00569     <span class="keyword">public</span>:
<a name="l00570"></a><a class="code" href="a00366.html#dff78411dc773187806bb015b405ac76">00570</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::key_type    key_type;
<a name="l00571"></a><a class="code" href="a00366.html#9094bb8a0708b841d3f30b54dfb6300a">00571</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::value_type  value_type;
<a name="l00572"></a><a class="code" href="a00366.html#f90d5edf4e2c923fadc9b71cfa9b43fe">00572</a>       <span class="keyword">typedef</span> <span class="keyword">typename</span> Set::iterator    set_iterator;
<a name="l00573"></a><a class="code" href="a00366.html#8295071b849b6c84b3047410bcf275ad">00573</a>       <span class="keyword">typedef</span> <a class="code" href="a00280.html">e_iterator_</a>               <a class="code" href="a00280.html">mask_iterator</a>;
<a name="l00574"></a><a class="code" href="a00366.html#19f114dd49ee7ae18491c0e7e5c47815">00574</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">m_iterator_</a>               <a class="code" href="a00228.html">iterator</a>;
<a name="l00575"></a><a class="code" href="a00366.html#8d008ddbf52821c7a0b454aa308ee463">00575</a>       <span class="keyword">typedef</span> <a class="code" href="a00228.html">iterator</a>                  <a class="code" href="a00228.html">const_iterator</a>;
<a name="l00576"></a>00576 
<a name="l00577"></a><a class="code" href="a00366.html#65106d3b15178da346718cd4cf2551a4">00577</a>       <a class="code" href="a00365.html">Subset</a>(Set&amp; s)
<a name="l00578"></a>00578         : actionset_(s),
<a name="l00579"></a>00579           set_(s)
<a name="l00580"></a>00580       {}
<a name="l00581"></a>00581 
<a name="l00582"></a><a class="code" href="a00366.html#e588ea2cec556e5878116945cdb5cc75">00582</a>       <a class="code" href="a00365.html">Subset</a>(ActionSet&amp; as, Set&amp; s)
<a name="l00583"></a>00583         : actionset_(as),
<a name="l00584"></a>00584           set_(s)
<a name="l00585"></a>00585       {}
<a name="l00586"></a>00586 
<a name="l00587"></a><a class="code" href="a00366.html#65841ca5de88d2505f717c32cc3299aa">00587</a>       <a class="code" href="a00228.html">iterator</a>  begin(<span class="keyword">const</span> key_type&amp; k) {
<a name="l00588"></a>00588         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00280.html">e_iterator_</a>(set_.begin(k),
<a name="l00589"></a>00589                                               set_, actionset_, k).skip());
<a name="l00590"></a>00590       }
<a name="l00591"></a>00591 
<a name="l00592"></a><a class="code" href="a00366.html#2d6007f27c9a2b46ab54ee20888dd798">00592</a>       <a class="code" href="a00228.html">iterator</a>  end(<span class="keyword">const</span> key_type&amp; k) {
<a name="l00593"></a>00593         <span class="keywordflow">return</span> m_iterator_::build(<a class="code" href="a00280.html">e_iterator_</a>(set_.end(k),
<a name="l00594"></a>00594                                               set_, actionset_, k));
<a name="l00595"></a>00595       }
<a name="l00596"></a>00596 
<a name="l00597"></a><a class="code" href="a00366.html#8249fafe0176df75e9a386eb22be879a">00597</a>       <span class="keywordtype">void</span>      set_stamp(<a class="code" href="a00228.html">const_iterator</a> pos,
<a name="l00598"></a>00598                           <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>&amp; now = TimeVal::now()) {
<a name="l00599"></a>00599         set_.set_stamp(pos, now);
<a name="l00600"></a>00600       }
<a name="l00601"></a>00601 
<a name="l00602"></a><a class="code" href="a00366.html#1b9fff72e9851b0bfa0b5bbedda8a0d2">00602</a>       <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>     stamp(<a class="code" href="a00228.html">const_iterator</a> pos)<span class="keyword"> const </span>{
<a name="l00603"></a>00603         <span class="keywordflow">return</span> set_.stamp(pos);
<a name="l00604"></a>00604       }
<a name="l00605"></a>00605 
<a name="l00606"></a><a class="code" href="a00366.html#2d1c00cbd896540588d1c6469ea56ad0">00606</a>       <span class="keywordtype">bool</span>      expired(<a class="code" href="a00228.html">const_iterator</a> pos,
<a name="l00607"></a>00607                         <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>&amp; period,
<a name="l00608"></a>00608                         <span class="keyword">const</span> <a class="code" href="a00373.html">TimeVal</a>&amp; now = TimeVal::now())<span class="keyword"> const </span>{
<a name="l00609"></a>00609         <span class="keywordflow">return</span> set_.expired(pos, period, now);
<a name="l00610"></a>00610       }
<a name="l00611"></a>00611     <span class="keyword">private</span>:
<a name="l00612"></a><a class="code" href="a00366.html#e51ca1942cc0a8db781225a352eaec12">00612</a>       ActionSet&amp;        actionset_;
<a name="l00613"></a><a class="code" href="a00366.html#5e23a2061e54acc1bde3a97baddeba97">00613</a>       Set&amp;              set_;
<a name="l00614"></a>00614     };
<a name="l00615"></a>00615 
<a name="l00616"></a>00616   } <span class="comment">// namespace utl</span>
<a name="l00617"></a>00617 
<a name="l00618"></a>00618 } <span class="comment">// namespace olsr</span>
<a name="l00619"></a>00619 
<a name="l00620"></a>00620 <span class="preprocessor">#endif // ! QOLYESTER_UTL_SET_HH</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Mon Sep 4 00:02:16 2006 for Qolyester daemon by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
